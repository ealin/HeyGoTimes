(function(){
var _1=20;
var _2=0;
var _3=null;
var _4=null;
var _5=0;
var _6=0;
var _7=location.hash;
var _8="#_";
var _9=[];
var _a=0;
var _b;
var _c=false;
var _d="portrait";
var _e="landscape";
window.iui={animOn:true,httpHeaders:{"X-Requested-With":"XMLHttpRequest"},showPage:function(_f,_10){
if(_f){
if(_4){
_4.removeAttribute("selected");
_11("blur",_4);
_4=null;
}
if(_12(_f,"dialog")){
_11("focus",_f);
_13(_f);
}else{
_11("load",_f);
var _14=_3;
_11("blur",_3);
_3=_f;
_11("focus",_f);
if(_14){
if(_10){
_11("unload",_14);
}
setTimeout(_15,0,_14,_f,_10);
}else{
_16(_f,_14);
}
}
}
},showPageById:function(_17){
var _18=$(_17);
if(_18){
var _19=_9.indexOf(_17);
var _1a=_19!=-1;
if(_1a){
_9.splice(_19);
}
iui.showPage(_18,_1a);
}
},goBack:function(cb){
_9.pop();
var _1b=_9.pop();
var _1c=$(_1b);
iui.showPage(_1c,true);
if(cb){
setTimeout(cb,1000,true);
}
},showPageByHref:function(_1d,_1e,_1f,_20,cb){
function _21(xhr){
if(xhr.readyState==4){
var _22=document.createElement("div");
_22.innerHTML=xhr.responseText;
_11("beforeinsert",document.body,{fragment:_22});
if(_20){
_23(_20,_22);
}else{
iui.insertPages(_22);
}
if(cb){
setTimeout(cb,1000,true);
}
}
};
iui.ajax(_1d,_1e,_1f,_21);
},ajax:function(url,_24,_25,cb){
var xhr=new XMLHttpRequest();
_25=_25?_25.toUpperCase():"GET";
if(_24&&_25=="GET"){
url=url+"?"+iui.param(_24);
}
xhr.open(_25,url,true);
if(cb){
xhr.onreadystatechange=function(){
cb(xhr);
};
}
var _26=null;
if(_24&&_25!="GET"){
xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
_26=iui.param(_24);
}
for(var _27 in iui.httpHeaders){
xhr.setRequestHeader(_27,iui.httpHeaders[_27]);
}
xhr.send(_26);
},param:function(o){
var s=[];
for(var key in o){
s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(o[key]);
}
return s.join("&").replace(/%20/g,"+");
},insertPages:function(_28){
var _29=_28.childNodes;
var _2a;
for(var i=0;i<_29.length;++i){
var _2b=_29[i];
if(_2b.nodeType==1){
if(!_2b.id){
_2b.id="__"+(++_a)+"__";
}
var _2c=$(_2b.id);
var _2d;
if(_2c){
_2c.parentNode.replaceChild(_2b,_2c);
_2d=$(_2b.id);
}else{
_2d=document.body.appendChild(_2b);
}
_11("afterinsert",document.body,{insertedNode:_2d});
if(_2b.getAttribute("selected")=="true"||!_2a){
_2a=_2b;
}
--i;
}
}
if(_2a){
iui.showPage(_2a);
}
},getSelectedPage:function(){
for(var _2e=document.body.firstChild;_2e;_2e=_2e.nextSibling){
if(_2e.nodeType==1&&_2e.getAttribute("selected")=="true"){
return _2e;
}
}
},isNativeUrl:function(_2f){
for(var i=0;i<iui.nativeUrlPatterns.length;i++){
if(_2f.match(iui.nativeUrlPatterns[i])){
return true;
}
}
return false;
},nativeUrlPatterns:[new RegExp("^http://maps.google.com/maps?"),new RegExp("^mailto:"),new RegExp("^tel:"),new RegExp("^http://www.youtube.com/watch\\?v="),new RegExp("^http://www.youtube.com/v/"),new RegExp("^javascript:"),],hasClass:function(_30,_31){
var re=new RegExp("(^|\\s)"+_31+"($|\\s)");
return re.exec(_30.getAttribute("class"))!=null;
},addClass:function(_32,_33){
if(!iui.hasClass(_32,_33)){
_32.className+=" "+_33;
}
},removeClass:function(_34,_35){
if(iui.hasClass(_34,_35)){
var reg=new RegExp("(\\s|^)"+_35+"(\\s|$)");
_34.className=_34.className.replace(reg," ");
}
}};
var _36=false;
addEventListener("load",function(_37){
var _38=iui.getSelectedPage();
var _39=_3a();
if(_38){
iui.showPage(_38);
}
if(_39&&(_39!=_38)){
iui.showPage(_39);
}
setTimeout(_3b,0);
if(typeof window.onorientationchange=="object"){
window.onorientationchange=_3c;
_c=true;
setTimeout(_3c,0);
}
setTimeout(_3d,0);
_b=setInterval(_3d,300);
_36=true;
},false);
addEventListener("unload",function(_3e){
return;
},false);
addEventListener("click",function(_3f){
if(_36!=true){
return;
}
var _40=_41(_3f.target,"a");
if(_40){
function _42(){
_40.removeAttribute("selected");
};
if(_40.href&&_40.hash&&_40.hash!="#"&&!_40.target){
_40.setAttribute("selected","true");
iui.showPage($(_40.hash.substr(1)));
setTimeout(_42,500);
}else{
if(_40==$("backButton")){
}else{
if(_40.getAttribute("type")=="submit"){
var _43=_41(_40,"form");
if(_43.target=="_self"){
_43.submit();
return;
}
_44(_43);
}else{
if(_40.getAttribute("type")=="cancel"){
_45(_41(_40,"form"));
}else{
if(_40.target=="_replace"){
_40.setAttribute("selected","progress");
iui.showPageByHref(_40.href,null,"GET",_40,_42);
}else{
if(iui.isNativeUrl(_40.href)){
return;
}else{
if(_40.target=="_webapp"){
location.href=_40.href;
}else{
if(!_40.target){
_40.setAttribute("selected","progress");
iui.showPageByHref(_40.href,null,"GET",null,_42);
}else{
return;
}
}
}
}
}
}
}
}
_3f.preventDefault();
}
},true);
addEventListener("click",function(_46){
var div=_41(_46.target,"div");
if(div&&_12(div,"toggle")){
div.setAttribute("toggled",div.getAttribute("toggled")!="true");
_46.preventDefault();
}
},true);
function _11(_47,_48,_49){
if(_48){
var _4a=document.createEvent("UIEvent");
_4a.initEvent(_47,false,false);
if(_49){
for(i in _49){
_4a[i]=_49[i];
}
}
_48.dispatchEvent(_4a);
}
};
function _3a(){
var _4b;
var _4c=location.hash.match(/#_([^\?_]+)/);
if(_4c){
_4b=_4c[1];
}
if(_4b){
_4b=$(_4b);
}
return _4b;
};
function _3c(){
var _4d=window.orientation;
switch(_4d){
case 0:
_4e(_d);
break;
case 90:
case -90:
_4e(_e);
break;
}
};
function _3d(){
if(!_c){
if((window.innerWidth!=_5)||(window.innerHeight!=_6)){
_5=window.innerWidth;
_6=window.innerHeight;
var _4f=(_5<_6)?_d:_e;
_4e(_4f);
}
}
if(location.hash!=_7){
var _50=location.hash.substr(_8.length);
iui.showPageById(_50);
}
};
function _4e(_51){
document.body.setAttribute("orient",_51);
if(_51==_d){
iui.removeClass(document.body,_e);
iui.addClass(document.body,_d);
}else{
if(_51==_e){
iui.removeClass(document.body,_d);
iui.addClass(document.body,_e);
}else{
iui.removeClass(document.body,_d);
iui.removeClass(document.body,_e);
}
}
setTimeout(scrollTo,100,0,1);
};
function _13(_52){
_4=_52;
_52.setAttribute("selected","true");
if(_12(_52,"dialog")){
_53(_52);
}
};
function _53(_54){
_54.onsubmit=function(_55){
_55.preventDefault();
_44(_54);
};
_54.onclick=function(_56){
if(_56.target==_54&&_12(_54,"dialog")){
_45(_54);
}
};
};
function _45(_57){
_57.removeAttribute("selected");
};
function _16(_58,_59){
if(!_58.id){
_58.id="__"+(++_a)+"__";
}
location.hash=_7=_8+_58.id;
_9.push(_58.id);
var _5a=$("pageTitle");
if(_58.title){
_5a.innerHTML=_58.title;
}
var _5b=_58.getAttribute("ttlclass");
_5a.className=_5b?_5b:"";
if(_58.localName.toLowerCase()=="form"&&!_58.target){
_53(_58);
}
var _5c=$("backButton");
if(_5c){
var _5d=$(_9[_9.length-2]);
if(_5d&&!_58.getAttribute("hideBackButton")){
_5c.style.display="inline";
_5c.innerHTML=_5d.title?_5d.title:"Back";
var _5e=_5d.getAttribute("bbclass");
_5c.className=(_5e)?"button "+_5e:"button";
}else{
_5c.style.display="none";
}
}
};
function _15(_5f,_60,_61){
var _62=(_61?_5f:_60).getAttribute("axis");
clearInterval(_b);
_11("beforetransition",_5f,{out:true});
_11("beforetransition",_60,{out:false});
if(_63()&&_62!="y"){
_64(_5f,_60,_61,_65);
}else{
_66(_5f,_60,_61,_62,_65);
}
function _65(){
if(!_12(_60,"dialog")){
_5f.removeAttribute("selected");
}
_b=setInterval(_3d,300);
setTimeout(_16,0,_60,_5f);
_5f.removeEventListener("webkitTransitionEnd",_65,false);
_11("aftertransition",_5f,{out:true});
_11("aftertransition",_60,{out:false});
};
};
function _63(){
return (iui.animOn)&&(typeof WebKitCSSMatrix=="object");
};
function _66(_67,_68,_69,_6a,cb){
if(_6a=="y"){
(_69?_67:_68).style.top="100%";
}else{
_68.style.left="100%";
}
scrollTo(0,1);
_68.setAttribute("selected","true");
var _6b=100;
_6c();
var _6d=setInterval(_6c,_2);
function _6c(){
_6b-=_1;
if(_6b<=0){
_6b=0;
clearInterval(_6d);
cb();
}
if(_6a=="y"){
_69?_67.style.top=(100-_6b)+"%":_68.style.top=_6b+"%";
}else{
_67.style.left=(_69?(100-_6b):(_6b-100))+"%";
_68.style.left=(_69?-_6b:_6b)+"%";
}
};
};
function _64(_6e,_6f,_70,cb){
_6f.style.webkitTransitionDuration="0ms";
var _71="translateX("+(_70?"-":"")+window.innerWidth+"px)";
var _72="translateX("+(_70?"100%":"-100%")+")";
_6f.style.webkitTransform=_71;
_6f.setAttribute("selected","true");
_6f.style.webkitTransitionDuration="";
function _73(){
_6e.style.webkitTransform=_72;
_6f.style.webkitTransform="translateX(0%)";
};
_6e.addEventListener("webkitTransitionEnd",cb,false);
setTimeout(_73,0);
};
function _3b(){
var _74=document.createElement("div");
_74.id="preloader";
document.body.appendChild(_74);
};
function _44(_75){
iui.addClass(_75,"progress");
iui.showPageByHref(_75.action,_76(_75),_75.method||"GET",null,_77);
function _77(){
iui.removeClass(_75,"progress");
};
};
function _76(_78){
function _79(_7a){
for(var i=0;i<_7a.length;++i){
if(_7a[i].name){
_7b[_7a[i].name]=_7a[i].value;
}
}
};
var _7b={};
_79(_78.getElementsByTagName("input"));
_79(_78.getElementsByTagName("textarea"));
_79(_78.getElementsByTagName("select"));
_79(_78.getElementsByTagName("button"));
return _7b;
};
function _41(_7c,_7d){
while(_7c&&(_7c.nodeType!=1||_7c.localName.toLowerCase()!=_7d)){
_7c=_7c.parentNode;
}
return _7c;
};
function _12(_7e,_7f){
return iui.hasClass(_7e,_7f);
};
function _23(_80,_81){
var _82=_80.parentNode;
var _83=_80;
while(_82.parentNode!=document.body){
_82=_82.parentNode;
_83=_83.parentNode;
}
_82.removeChild(_83);
var _84;
while(_81.firstChild){
_84=_82.appendChild(_81.firstChild);
_11("afterinsert",document.body,{insertedNode:_84});
}
};
function $(id){
return document.getElementById(id);
};
function ddd(){
console.log.apply(console,arguments);
};
})();

