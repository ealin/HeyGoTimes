<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="/b2/CH03_02.files/filelist.xml">
<link rel=Edit-Time-Data href="/b2/CH03_02.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>3.2. 無痛起步 - 善用sample code</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chmetcnv"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>cebm</o:Author>
  <o:LastAuthor>Win7User</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>4343</o:TotalTime>
  <o:LastPrinted>2007-04-13T08:58:00Z</o:LastPrinted>
  <o:Created>2011-09-28T14:36:00Z</o:Created>
  <o:LastSaved>2011-09-28T14:36:00Z</o:LastSaved>
  <o:Pages>17</o:Pages>
  <o:Words>2832</o:Words>
  <o:Characters>16146</o:Characters>
  <o:Company>xxx</o:Company>
  <o:Lines>134</o:Lines>
  <o:Paragraphs>37</o:Paragraphs>
  <o:CharactersWithSpaces>18941</o:CharactersWithSpaces>
  <o:Version>12.00</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:TargetScreenSize>544x376</o:TargetScreenSize>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
<link rel=themeData href="/b2/CH03_02.files/themedata.thmx">
<link rel=colorSchemeMapping href="/b2/CH03_02.files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-TW</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:HangulWidthLikeWW11/>
   <w:UseNormalStyleForList/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" LatentStyleCount="267">
  <w:LsdException Locked="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="99" Name="Hyperlink"/>
  <w:LsdException Locked="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:新細明體;
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-alt:PMingLiU;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1107304683 0 0 159 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520092929 1073786111 9 0 415 0;}
@font-face
	{font-family:微軟正黑體;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:136;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:135 680476672 22 0 1048585 0;}
@font-face
	{font-family:"\@微軟正黑體";
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:136;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:135 680476672 22 0 1048585 0;}
@font-face
	{font-family:"\@新細明體";
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-next:正文;
	margin-top:9.0pt;
	margin-right:0cm;
	margin-bottom:9.0pt;
	margin-left:0cm;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:26.0pt;
	font-weight:bold;}
h2
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:24.0pt;
	font-family:"Arial","sans-serif";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	font-weight:bold;}
h3
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:18.0pt;
	font-family:"Arial","sans-serif";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{mso-style-update:auto;
	mso-style-priority:39;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:2.0gd;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{mso-style-update:auto;
	mso-style-priority:39;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:4.0gd;
	mso-para-margin-bottom:.0001pt;
	line-height:18.0pt;
	mso-line-height-rule:exactly;
	mso-pagination:none;
	tab-stops:right dotted 509.7pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{mso-style-noshow:yes;
	mso-style-unhide:no;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	layout-grid-mode:char;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoTof, li.MsoTof, div.MsoTof
	{mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:4.0gd;
	mso-para-margin-bottom:.0001pt;
	text-indent:-10.0pt;
	mso-char-indent-count:-2.0;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
span.MsoFootnoteReference
	{mso-style-noshow:yes;
	mso-style-unhide:no;
	vertical-align:super;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	mso-style-unhide:no;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-unhide:no;
	color:purple;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-style-unhide:no;
	mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"新細明體","serif";
	mso-bidi-font-family:新細明體;}
p.a, li.a, div.a
	{mso-style-name:圖表;
	mso-style-unhide:no;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	mso-fareast-font-family:新細明體;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("/b2/CH03_02.files/header.htm") fs;
	mso-footnote-continuation-separator:url("/b2/CH03_02.files/header.htm") fcs;
	mso-endnote-separator:url("/b2/CH03_02.files/header.htm") es;
	mso-endnote-continuation-separator:url("/b2/CH03_02.files/header.htm") ecs;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:42.55pt 42.55pt 42.55pt 42.55pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:18.0pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:158546755;
	mso-list-type:hybrid;
	mso-list-template-ids:1535307478 -111892554 1430544888 1199068724 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-text:"Q%1\.";
	mso-level-tab-stop:87.0pt;
	mso-level-number-position:left;
	margin-left:87.0pt;
	text-indent:-42.0pt;}
@list l0:level2
	{mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-18.0pt;}
@list l0:level3
	{mso-level-start-at:2;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:66.0pt;
	mso-level-number-position:left;
	margin-left:66.0pt;
	text-indent:-18.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;}
@list l1
	{mso-list-id:389571474;
	mso-list-type:hybrid;
	mso-list-template-ids:2099304850 -1400722426 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l1:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:36.0pt;
	mso-level-number-position:left;
	text-indent:-18.0pt;}
@list l2
	{mso-list-id:454955576;
	mso-list-type:hybrid;
	mso-list-template-ids:658046964 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l2:level1
	{mso-level-tab-stop:24.0pt;
	mso-level-number-position:left;
	margin-left:24.0pt;
	text-indent:-24.0pt;}
@list l3
	{mso-list-id:583034711;
	mso-list-type:hybrid;
	mso-list-template-ids:-1914149648 301602432 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l3:level1
	{mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-42.0pt;}
@list l4
	{mso-list-id:605582915;
	mso-list-type:hybrid;
	mso-list-template-ids:1313533408 -912989748 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l4:level1
	{mso-level-text:"A%1\.";
	mso-level-tab-stop:87.0pt;
	mso-level-number-position:left;
	margin-left:87.0pt;
	text-indent:-42.0pt;}
@list l5
	{mso-list-id:746538026;
	mso-list-type:hybrid;
	mso-list-template-ids:1868190730 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:48.0pt;
	mso-level-number-position:left;
	margin-left:48.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l5:level2
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:left;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l6
	{mso-list-id:845905672;
	mso-list-template-ids:1931387534;}
@list l6:level1
	{mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-24.0pt;}
@list l6:level2
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%2、;
	mso-level-tab-stop:93.0pt;
	mso-level-number-position:left;
	margin-left:93.0pt;
	text-indent:-24.0pt;}
@list l6:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:117.0pt;
	mso-level-number-position:right;
	margin-left:117.0pt;
	text-indent:-24.0pt;}
@list l6:level4
	{mso-level-tab-stop:141.0pt;
	mso-level-number-position:left;
	margin-left:141.0pt;
	text-indent:-24.0pt;}
@list l6:level5
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%5、;
	mso-level-tab-stop:165.0pt;
	mso-level-number-position:left;
	margin-left:165.0pt;
	text-indent:-24.0pt;}
@list l6:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:189.0pt;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-24.0pt;}
@list l6:level7
	{mso-level-tab-stop:213.0pt;
	mso-level-number-position:left;
	margin-left:213.0pt;
	text-indent:-24.0pt;}
@list l6:level8
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%8、;
	mso-level-tab-stop:237.0pt;
	mso-level-number-position:left;
	margin-left:237.0pt;
	text-indent:-24.0pt;}
@list l6:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:261.0pt;
	mso-level-number-position:right;
	margin-left:261.0pt;
	text-indent:-24.0pt;}
@list l7
	{mso-list-id:961569032;
	mso-list-type:hybrid;
	mso-list-template-ids:-1860646940 1131072196 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l7:level1
	{mso-level-number-format:alpha-upper;
	mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-24.0pt;}
@list l8
	{mso-list-id:966929372;
	mso-list-template-ids:891555112;}
@list l8:level1
	{mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-24.0pt;}
@list l8:level2
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:110.25pt;
	mso-level-number-position:left;
	margin-left:110.25pt;
	text-indent:-41.25pt;}
@list l8:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:117.0pt;
	mso-level-number-position:right;
	margin-left:117.0pt;
	text-indent:-24.0pt;}
@list l8:level4
	{mso-level-tab-stop:141.0pt;
	mso-level-number-position:left;
	margin-left:141.0pt;
	text-indent:-24.0pt;}
@list l8:level5
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%5、;
	mso-level-tab-stop:165.0pt;
	mso-level-number-position:left;
	margin-left:165.0pt;
	text-indent:-24.0pt;}
@list l8:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:189.0pt;
	mso-level-number-position:right;
	margin-left:189.0pt;
	text-indent:-24.0pt;}
@list l8:level7
	{mso-level-tab-stop:213.0pt;
	mso-level-number-position:left;
	margin-left:213.0pt;
	text-indent:-24.0pt;}
@list l8:level8
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%8、;
	mso-level-tab-stop:237.0pt;
	mso-level-number-position:left;
	margin-left:237.0pt;
	text-indent:-24.0pt;}
@list l8:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:261.0pt;
	mso-level-number-position:right;
	margin-left:261.0pt;
	text-indent:-24.0pt;}
@list l9
	{mso-list-id:973482343;
	mso-list-template-ids:-1914149648;}
@list l9:level1
	{mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-42.0pt;}
@list l9:level2
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%2、;
	mso-level-tab-stop:75.0pt;
	mso-level-number-position:left;
	margin-left:75.0pt;
	text-indent:-24.0pt;}
@list l9:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:99.0pt;
	mso-level-number-position:right;
	margin-left:99.0pt;
	text-indent:-24.0pt;}
@list l9:level4
	{mso-level-tab-stop:123.0pt;
	mso-level-number-position:left;
	margin-left:123.0pt;
	text-indent:-24.0pt;}
@list l9:level5
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%5、;
	mso-level-tab-stop:147.0pt;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-24.0pt;}
@list l9:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:171.0pt;
	mso-level-number-position:right;
	margin-left:171.0pt;
	text-indent:-24.0pt;}
@list l9:level7
	{mso-level-tab-stop:195.0pt;
	mso-level-number-position:left;
	margin-left:195.0pt;
	text-indent:-24.0pt;}
@list l9:level8
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%8、;
	mso-level-tab-stop:219.0pt;
	mso-level-number-position:left;
	margin-left:219.0pt;
	text-indent:-24.0pt;}
@list l9:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:243.0pt;
	mso-level-number-position:right;
	margin-left:243.0pt;
	text-indent:-24.0pt;}
@list l10
	{mso-list-id:1038120222;
	mso-list-type:hybrid;
	mso-list-template-ids:-1807608100 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l10:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:24.0pt;
	mso-level-number-position:left;
	margin-left:24.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l11
	{mso-list-id:1098252455;
	mso-list-type:hybrid;
	mso-list-template-ids:-1946130362 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l11:level1
	{mso-level-tab-stop:51.0pt;
	mso-level-number-position:left;
	margin-left:51.0pt;
	text-indent:-24.0pt;}
@list l12
	{mso-list-id:1154029160;
	mso-list-type:hybrid;
	mso-list-template-ids:1931387534 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l12:level1
	{mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-24.0pt;}
@list l13
	{mso-list-id:1281456551;
	mso-list-template-ids:-792574932;}
@list l13:level1
	{mso-level-start-at:3;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l13:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l13:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l13:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l13:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l13:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l13:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l13:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l13:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l14
	{mso-list-id:1325624981;
	mso-list-type:hybrid;
	mso-list-template-ids:125205286 -1400722426 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l14:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l14:level2
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%2、;
	mso-level-tab-stop:48.0pt;
	mso-level-number-position:left;
	margin-left:48.0pt;
	text-indent:-24.0pt;}
@list l15
	{mso-list-id:1423646903;
	mso-list-type:hybrid;
	mso-list-template-ids:-1741765924 -1400722426 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l15:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l16
	{mso-list-id:1450782055;
	mso-list-template-ids:67698719;}
@list l16:level1
	{mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l16:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l16:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l16:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l16:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l16:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l16:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l16:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l16:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l17
	{mso-list-id:1524392773;
	mso-list-template-ids:475812312;}
@list l17:level1
	{mso-level-start-at:3;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:40.5pt;
	text-indent:-40.5pt;}
@list l17:level2
	{mso-level-start-at:2;
	mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:82.35pt;
	text-indent:-54.0pt;}
@list l17:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:128.7pt;
	text-indent:-72.0pt;}
@list l17:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:175.05pt;
	text-indent:-90.0pt;}
@list l17:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:221.4pt;
	text-indent:-108.0pt;}
@list l17:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:285.75pt;
	text-indent:-144.0pt;}
@list l17:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:332.1pt;
	text-indent:-162.0pt;}
@list l17:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:378.45pt;
	text-indent:-180.0pt;}
@list l17:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:424.8pt;
	text-indent:-198.0pt;}
@list l18
	{mso-list-id:1626229939;
	mso-list-type:hybrid;
	mso-list-template-ids:891555112 67698703 258796532 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l18:level1
	{mso-level-tab-stop:69.0pt;
	mso-level-number-position:left;
	margin-left:69.0pt;
	text-indent:-24.0pt;}
@list l18:level2
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:110.25pt;
	mso-level-number-position:left;
	margin-left:110.25pt;
	text-indent:-41.25pt;}
@list l19
	{mso-list-id:1655330813;
	mso-list-type:hybrid;
	mso-list-template-ids:1936876642 -828056156 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l19:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:18.0pt;
	mso-level-number-position:left;
	margin-left:18.0pt;
	text-indent:-18.0pt;}
@list l20
	{mso-list-id:1792819970;
	mso-list-type:hybrid;
	mso-list-template-ids:-1418307488 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l20:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:51.0pt;
	mso-level-number-position:left;
	margin-left:51.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l21
	{mso-list-id:1843740495;
	mso-list-type:hybrid;
	mso-list-template-ids:-1877976898 -1400351426 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l21:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:45.0pt;
	mso-level-number-position:left;
	margin-left:45.0pt;
	text-indent:-18.0pt;}
@list l22
	{mso-list-id:1956405305;
	mso-list-template-ids:-1743857760;}
@list l22:level1
	{mso-level-text:"Q%1\.";
	mso-level-tab-stop:87.0pt;
	mso-level-number-position:left;
	margin-left:87.0pt;
	text-indent:-42.0pt;}
@list l22:level2
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%2、;
	mso-level-tab-stop:48.0pt;
	mso-level-number-position:left;
	margin-left:48.0pt;
	text-indent:-24.0pt;}
@list l22:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:72.0pt;
	mso-level-number-position:right;
	margin-left:72.0pt;
	text-indent:-24.0pt;}
@list l22:level4
	{mso-level-tab-stop:96.0pt;
	mso-level-number-position:left;
	margin-left:96.0pt;
	text-indent:-24.0pt;}
@list l22:level5
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%5、;
	mso-level-tab-stop:120.0pt;
	mso-level-number-position:left;
	margin-left:120.0pt;
	text-indent:-24.0pt;}
@list l22:level6
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:144.0pt;
	mso-level-number-position:right;
	margin-left:144.0pt;
	text-indent:-24.0pt;}
@list l22:level7
	{mso-level-tab-stop:168.0pt;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-24.0pt;}
@list l22:level8
	{mso-level-number-format:ideograph-traditional;
	mso-level-text:%8、;
	mso-level-tab-stop:192.0pt;
	mso-level-number-position:left;
	margin-left:192.0pt;
	text-indent:-24.0pt;}
@list l22:level9
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:216.0pt;
	mso-level-number-position:right;
	margin-left:216.0pt;
	text-indent:-24.0pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
table.MsoTableGrid
	{mso-style-name:网格型;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-unhide:no;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-TW link=blue vlink=purple style='tab-interval:24.0pt;text-justify-trim:
punctuation'>

<div class=Section1 style='layout-grid:18.0pt'>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoToc2 style='tab-stops:60.0pt right dotted 509.7pt'><!--[if supportFields]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span style='mso-element:
field-begin'></span><span style='mso-spacerun:yes'> </span>TOC \o
&quot;1-3&quot; \h \z \u <span style='mso-element:field-separator'></span></span><![endif]--><span
class=MsoHyperlink><span lang=EN-US style='mso-no-proof:yes'><a
href="#_Toc304916921"><span style='font-family:"微軟正黑體","sans-serif"'>3.2.</span><span
style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";mso-bidi-font-family:
"Times New Roman";color:windowtext;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1'>      </span></span><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><span lang=EN-US>無痛起步 - </span></span><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><span lang=EN-US>善用sample code</span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'>. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916921 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>1</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320031000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc3><span class=MsoHyperlink><span lang=EN-US style='mso-no-proof:
yes'><a href="#_Toc304916922"><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
lang=EN-US>計算機系統啟動流程</span></span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916922 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>3</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320032000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc3><span class=MsoHyperlink><span lang=EN-US style='mso-no-proof:
yes'><a href="#_Toc304916923"><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
lang=EN-US>中斷向量表</span></span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916923 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>4</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320033000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc3><span class=MsoHyperlink><span lang=EN-US style='mso-no-proof:
yes'><a href="#_Toc304916924"><span style='font-family:"微軟正黑體","sans-serif"'>Boot</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span lang=EN-US>程式(</span></span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span lang=EN-US>啟動程式)</span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-tab-count:1 dotted'> </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916924 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>7</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320034000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc3><span class=MsoHyperlink><span lang=EN-US style='mso-no-proof:
yes'><a href="#_Toc304916925"><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
lang=EN-US>主程式</span></span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>... </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916925 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>11</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320035000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc3><span class=MsoHyperlink><span lang=EN-US style='mso-no-proof:
yes'><a href="#_Toc304916926"><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
lang=EN-US>驅動程式1 - Timer</span></span><span style='color:windowtext;display:
none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916926 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>12</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320036000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoToc3><span class=MsoHyperlink><span lang=EN-US style='mso-no-proof:
yes'><a href="#_Toc304916927"><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
lang=EN-US>驅動程式2 - LED</span></span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span></span><!--[if supportFields]><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'><span style='mso-element:field-begin'></span></span><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'> PAGEREF _Toc304916927 \h </span><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-separator'></span></span><![endif]--><span
style='color:windowtext;display:none;mso-hide:screen;text-decoration:none;
text-underline:none'>14</span><span style='color:windowtext;display:none;
mso-hide:screen;text-decoration:none;text-underline:none'><!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900310036003900320037000000</w:data>
</xml><![endif]--></span><!--[if supportFields]><span style='color:windowtext;
display:none;mso-hide:screen;text-decoration:none;text-underline:none'><span
style='mso-element:field-end'></span></span><![endif]--></a></span></span><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><!--[if supportFields]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span style='mso-element:
field-end'></span></span><![endif]--><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h2 style='margin-left:82.35pt;text-indent:-54.0pt;line-height:18.0pt;
mso-line-height-rule:exactly;mso-list:l17 level2 lfo23'><a name="_Toc304916921"><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>無痛起步<span lang=EN-US> - </span>善用<span
lang=EN-US>sample code</span></span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly'><span style='font-family:"微軟正黑體","sans-serif"'>請注意，讀者可以先不理會以下提到某些檔案的內容，在後續章節會陸續說明；在這一節筆者想要傳達以下兩個訊息：<span
style='display:none;mso-hide:all'>　</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<ol style='margin-top:0cm' start=1 type=a>
 <li class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly;
     mso-list:l1 level1 lfo9;tab-stops:list 36.0pt'><span style='font-family:
     "微軟正黑體","sans-serif"'>一個完整的嵌入式系統至少應包含多少種類的檔案，哪些檔案是程式設計師必須編寫的，哪些是由工具<span
     lang=EN-US>(cross tools)</span>產生的。<span lang=EN-US><o:p></o:p></span></span></li>
</ol>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<ol style='margin-top:0cm' start=2 type=a>
 <li class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly;
     mso-list:l1 level1 lfo9;tab-stops:list 36.0pt'><span style='font-family:
     "微軟正黑體","sans-serif"'>一個最簡單的嵌入式系統，應該包含哪些程式模組。<span lang=EN-US><o:p></o:p></span></span></li>
</ol>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>=============================================================<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『我從<span lang=EN-US>CPU</span>廠商提供的<span
lang=EN-US>sample code</span>中找到一個比較簡單的<span lang=EN-US>project<a
style='mso-footnote-id:ftn1' href="#_ftn1" name="_ftnref1" title=""><span
class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[1]</span></span><![endif]></span></span></a></span>；程式功能是利用<span
lang=EN-US>CPU</span>內部的計時機制<span lang=EN-US>(Timer)</span>，每隔一段時間就去開關<span
lang=EN-US>LED</span>一次。這個<span lang=EN-US>project</span>中包含以下檔案：<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level1 lfo6;tab-stops:list 48.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>程式部分<span lang=EN-US>(</span>由程式設計師編寫<span
lang=EN-US>)</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>vector.c</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – </span><span
style='font-family:"微軟正黑體","sans-serif"'>中斷向量表<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>boot.c
– </span></b><span style='font-family:"微軟正黑體","sans-serif"'>啟動程式<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>main.c</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – </span><span
style='font-family:"微軟正黑體","sans-serif"'>應用程式的主程式<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_timer0.c</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – Timer</span><span
style='font-family:"微軟正黑體","sans-serif"'>的驅動程式<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LED.c
</span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>– LED</span><span
style='font-family:"微軟正黑體","sans-serif"'>的驅動程式<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level1 lfo6;tab-stops:list 48.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>其他檔案<span lang=EN-US>(</span>由程式設計師編寫<span
lang=EN-US>)</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>test.mak</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – makefile<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>test.lds</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – Link Script (</span><span
style='font-family:"微軟正黑體","sans-serif"'>提供給<span lang=EN-US>Linker</span>的資訊，描述程式要被定址<a
style='mso-footnote-id:ftn2' href="#_ftn2" name="_ftnref2" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[2]</span></span><![endif]></span></span></span></a>到哪個位址<span
lang=EN-US>)<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>build.bat</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – </span><span
style='font-family:"微軟正黑體","sans-serif"'>執行<span lang=EN-US>makefile<o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level1 lfo6;tab-stops:list 48.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>執行<span lang=EN-US>build.bat</span>後產生：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>test.elf
</span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>– build</span><span
style='font-family:"微軟正黑體","sans-serif"'>後產生之<span lang=EN-US>ELF</span>格式的執行檔<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>test.bin</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – </span><span
style='font-family:"微軟正黑體","sans-serif"'>由<span lang=EN-US>ELF</span>格式轉換而來的<span
lang=EN-US>binary</span>檔<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>test.err</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – </span><span
style='font-family:"微軟正黑體","sans-serif"'>錯誤訊息檔<span lang=EN-US>(</span>儲存編譯及連結時期的輸出訊息<span
lang=EN-US>)<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>test.map</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> – </span><span
style='font-family:"微軟正黑體","sans-serif"'>連結後產生的檔案，紀錄程式中每個函數、變數的位址<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l5 level2 lfo6;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>vector.o</span><span
style='font-family:"微軟正黑體","sans-serif"'>、<span lang=EN-US>boot.o</span>、<span
lang=EN-US>main.o</span>、<span lang=EN-US>drv_timer0.o</span>、<span lang=EN-US>drv_LED.o
- .c</span>檔編譯後產生的<span lang=EN-US>object file.<o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『我把<span lang=EN-US>build</span>產生的<span
lang=EN-US>ELF</span>檔透過<span lang=EN-US>ICE</span>下載到版子上，並讓它執行，發現<span
lang=EN-US>LED</span>確實會閃爍，這應該代表程式已經可以正常執行了吧。我決定先不管<span lang=EN-US>makefile</span>、<span
lang=EN-US>link script</span>還有執行檔格式的細節，就算暫時看不懂這些檔案的內容，但只要依樣畫葫蘆就可以把我自己寫的程式加到<span
lang=EN-US>project</span>中；所以我想試著先把幾個程式檔<span lang=EN-US>(.c</span>檔<span
lang=EN-US>)</span>看懂，雖然行數不多，但我看了半天，還是有些迷迷糊糊，很多程式碼不知道是幹什麼的，而它居然是可以運行的！<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『初學者通常都搞不太清楚<span
lang=EN-US>makefile</span>這些東西，尤其是<span lang=EN-US>link script</span>，因為寫<span
lang=EN-US>PC</span>程式時根本不用理會重定址這件事。所以你的學習方向是對的，先把可以新增、修改、測試程式的環境架設起來，接著弄懂程式的架構，然後再以這個<span
lang=EN-US>project</span>為基礎去實現你想要做的功能。至於程式部分，你應該要先弄清楚這顆<span lang=EN-US>CPU</span>規定的啟動流程；我這樣問吧，<span
lang=EN-US>CPU</span>重新啟動<span lang=EN-US>(Reset)</span>後會到哪個位址抓第一</span><span
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'>個指令來</span><span
style='font-family:"微軟正黑體","sans-serif";display:none;mso-hide:all'>抓第一行位址命令</span><span
style='font-family:"微軟正黑體","sans-serif"'>執行？』</span><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『<span
lang=EN-US>CPU</span>使用手冊中</span><span style='font-family:"微軟正黑體","sans-serif";
mso-bidi-font-family:新細明體'>似乎沒寫的很清楚，我只知道它規定我們程式的開頭必須被定址到<span lang=EN-US>0xC0000</span>；我根本不知道<span
lang=EN-US>0xC0000</span>這個位址的意義何在，而且我們程式的開頭</span><a style='mso-footnote-id:
ftn3' href="#_ftn3" name="_ftnref3" title=""><span class=MsoFootnoteReference><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[3]</span></span><![endif]></span></span></span></a><span
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'>是</span><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>vector.c</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'> (</span><span
style='font-family:"微軟正黑體","sans-serif"'>見程式<span lang=EN-US>3-0)</span>，其中除了一個叫做<span
lang=EN-US>dummy</span>的函數外，就只有一個陣列。我實在是被搞迷糊了，如果<span lang=EN-US>0xC0000</span>是<span
lang=EN-US>CPU</span>取得第一行指令的位址，為什麼<span lang=EN-US>sample code</span>會把一個陣列定址到在這個地方？<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『恐怕是你沒把<span
lang=EN-US>CPU</span>的<span lang=EN-US>data sheet</span>看清楚吧！在告訴你答案之前，我們先來看看一般系統的啟動流程：』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304916922"><span style='font-family:"微軟正黑體","sans-serif"'>計算機系統啟動流程</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『一般嵌入式系統的啟動流程為：』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l21 level1 lfo11;tab-stops:list 45.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>CPU</span><span
style='font-family:"微軟正黑體","sans-serif"'>會到特定的位址抓取第一行指令來執行，實際的細節有兩種：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l18 level1 lfo12;tab-stops:list 69.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>CPU</span><span
style='font-family:"微軟正黑體","sans-serif"'>重新啟動後，將其<span lang=EN-US>PC<a
style='mso-footnote-id:ftn4' href="#_ftn4" name="_ftnref4" title=""><span
class=MsoFootnoteReference><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[4]</span></span><![endif]></span></span></a>(Program Counter)</span>暫存器設為特定位址，只要<span
lang=EN-US>user</span>的程式是儲存在這個位址就可以正確被執行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l18 level1 lfo12;tab-stops:list 69.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>CPU</span><span
style='font-family:"微軟正黑體","sans-serif"'>重新啟動後，會將<span lang=EN-US>CPU</span>中儲存<b
style='mso-bidi-font-weight:normal'>中斷向量表</b><a style='mso-footnote-id:ftn5'
href="#_ftn5" name="_ftnref5" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[5]</span></span><![endif]></span></span></span></a>位址的暫存器設為某特定位址，接著引發“<span
lang=EN-US>RESET</span>中斷”；所以程式設計師只要把中斷向量表儲存在這個位址，並指定“<span lang=EN-US>Reset</span>中斷的處理程式”為自己寫的某個函數<span
lang=EN-US>(</span>如<span lang=EN-US>boot())</span>，則該函數就可以在開機後被<span
lang=EN-US>CPU</span>執行<span lang=EN-US>(</span>詳細流程請參考圖<span lang=EN-US>3-3)</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l21 level1 lfo11;tab-stops:list 45.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>User</span><span
style='font-family:"微軟正黑體","sans-serif"'>程式開始運行後，會先對<span lang=EN-US>CPU</span>做初始化的動作。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l21 level1 lfo11;tab-stops:list 45.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>將程式的資料段從唯讀記憶體<span
lang=EN-US>(ROM</span>或<span lang=EN-US>Flash)</span>載入到<span lang=EN-US>RAM</span>中。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l21 level1 lfo11;tab-stops:list 45.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>CPU</span><span
style='font-family:"微軟正黑體","sans-serif"'>初始化完畢後，接著初始化應用程式會用到的硬體設備<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l21 level1 lfo11;tab-stops:list 45.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>初始化各個子系統，例如嵌入式作業系統<span
lang=EN-US>(RTOS)</span>、動態記憶體管理、圖形介面系統<span lang=EN-US>…</span>等等<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l21 level1 lfo11;tab-stops:list 45.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>f.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>執行應用程式的主程式。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『如果先不管步驟<span
lang=EN-US>c</span>、<span lang=EN-US>d</span>、<span lang=EN-US>e</span>，你對這樣的流程有問題嗎？』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『可以再說明一下步驟<span
lang=EN-US>a</span>嗎？這些名詞雖然以前在學校都學過，但實在暫時無法把這些名詞和實際的板子聯想在一起。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『不管是那一種<span
lang=EN-US>CPU</span>，它總是會規定一種啟動的方式，這樣要在它上面寫程式的人才知道要把程式放<span lang=EN-US>(</span>定址<span
lang=EN-US>)</span>在哪裡。寫應用程式的工程師可以不知道這個細節，但是我們做韌體的人就不能不弄清楚<span lang=EN-US>CPU</span>啟動程序的來龍去脈。以我們現在用的這顆<span
lang=EN-US>CPU</span>為例，它是採用上述步驟<span lang=EN-US>a</span>的第二個方式；意即<span
lang=EN-US>CPU</span>啟動後會把<span lang=EN-US>0xC0000</span>當作存放中斷向量表的位址，並引發<span
lang=EN-US>Reset</span>中斷。所以只要把我們啟動程式所在的位址<span lang=EN-US>(</span>如下圖<span
lang=EN-US>boot())</span>，存在中斷向量表中代表<span lang=EN-US>RESET</span>中斷的<span
lang=EN-US>entry</span>即可。詳情可以參考下圖。』</span><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:510pt;
 height:284.25pt'>
 <v:imagedata src="/b2/CH03_02.files/image001.jpg" o:title="03-03-CPU透過RESET中斷的啟動流程"/>
</v:shape><![endif]--><![if !vml]><img width=680 height=379
src="/b2/CH03_02.files/image002.jpg" v:shapes="_x0000_i1025"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359595"><span style='font-family:"微軟正黑體","sans-serif"'>圖<span
lang=EN-US>3-4</span>：<span lang=EN-US>CPU</span>透過<span lang=EN-US>RESET</span>中斷的啟動流程</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>=============================================================<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
新細明體'>不同的<span lang=EN-US>CPU</span>可能會有不同的啟動方式，基本上不外乎本節提到的這兩種：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
新細明體'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l20 level1 lfo13;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'>指定特定位址為程式啟動位址<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l20 level1 lfo13;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'>透過中斷向量表儲存程式啟動位址<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
新細明體'>前者比較簡單，所以本章會以後者當做解說的實例；讀者無須拘泥於以下將列出的程式碼，只要知道一個最簡單的嵌入式系統所包含的程式模組各代表什麼意義即可。實務上，從<span
lang=EN-US>CPU</span>的<span lang=EN-US>data sheet</span>以及廠商提供的<span
lang=EN-US>sample code</span>應該就可以得知該<span lang=EN-US>CPU</span>啟動的細節。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304916923"><span style='font-family:"微軟正黑體","sans-serif"'>中斷向量表</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『現在我終於知道為什麼<span lang=EN-US>link</span>時要把<span
lang=EN-US>vector.c</span>中的那個陣列定址到<span lang=EN-US>0xC0000</span>了，原來我的主程式是歷經這些步驟才被執行到的。中斷向量表和中斷處理程式<span
lang=EN-US>(ISR – Interrupt Service Routine)</span>的概念我在學校修組合語言與計算機組織時曾經學過，只是我從沒想過怎麼用程式來實現它。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『沒錯，有時是很難想像如何實作教科書中提到的道理；沒關係，我們先來看看計算機系統的程式是如何執行的，你參考一下這個圖，能否說出一般函數和<span
lang=EN-US>ISR</span>有什麼不同？』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:510pt;height:303.75pt'>
 <v:imagedata src="/b2/CH03_02.files/image003.jpg" o:title="03-05-計算機系統程式執行流程"/>
</v:shape><![endif]--><![if !vml]><img width=680 height=405
src="/b2/CH03_02.files/image004.jpg" v:shapes="_x0000_i1026"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359596"><span style='font-family:"微軟正黑體","sans-serif"'>圖<span
lang=EN-US>3-5</span>：計算機系統程式執行流程</span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『這個我懂啊，一般程式都是循序執行的，以上圖為例，<span lang=EN-US>CPU</span>一定要執行到<span
lang=EN-US>main()</span>的第<span lang=EN-US>20</span>行，才有可能去呼叫<span lang=EN-US>sub_fun()</span>；而中斷可能在任何的時間點產生，例如使用者可以在任何時候按下鍵盤的某個鍵，此時不論<span
lang=EN-US>CPU</span>下個要執行的指令是什麼，<span lang=EN-US>CPU</span>都會先紀錄目前的狀態，然後參考中斷向量表，接著去執行鍵盤中斷的處理程式<span
lang=EN-US>(keyboard ISR)</span>。等<span lang=EN-US>ISR</span>執行完後，<span
lang=EN-US>CPU</span>會取回中斷之前的狀態，然後返回被中斷的位址繼續循序執行。<span style='display:none;
mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『觀念很清楚啊，接下來我和你一起來看看中斷向量表是怎麼實作的。』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Vector.c - </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>中斷向量表<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>***************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>void dummy(void);<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>定義在其他程式檔的<span lang=EN-US>functions<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>extern void boot(void);<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>extern void drv_isr_timer0 (void);<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>中斷向量表定義<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>***************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>const</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'> unsigned long
vector[] = <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>(unsigned long)boot,<span
style='mso-spacerun:yes'>            </span><span style='mso-tab-count:1'>       </span>//
00 Rest<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 01 Division by zero<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 02 Address exception<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 03 NMI<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 04 Software exception 0<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 05 Software exception 1<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 06 Port input interrupt 0<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>          </span><span
style='mso-spacerun:yes'> </span><span style='mso-tab-count:1'>    </span>// 07
Port input interrupt 1<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 08 DMA Channel 0<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 09 DMA Channel 1<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>(unsigned long)drv_isr_timer0,<span
style='mso-tab-count:2'>             </span>// 10 Timer 0 <o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned long)
dummy,<span style='mso-spacerun:yes'>  </span><span style='mso-tab-count:3'>                     </span>//
11 Timer 1 <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned long)
dummy,<span style='mso-spacerun:yes'>  </span><span style='mso-tab-count:3'>                     </span>//
12 Timer 2<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned long)
dummy,<span style='mso-spacerun:yes'>  </span><span style='mso-tab-count:3'>                     </span>//
13 Timer 3<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned long)
dummy,<span style='mso-spacerun:yes'>  </span><span style='mso-tab-count:3'>                     </span>//
14 Timer 4<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>           </span><span
style='mso-tab-count:1'>    </span>// 15 Serial interface Channel 0<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'>        </span>(unsigned
long)dummy,<span style='mso-spacerun:yes'>    </span><span
style='mso-spacerun:yes'>       </span><span style='mso-tab-count:1'>    </span>//
16 Serial interface Channel 1<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:2'>               </span>…<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:2'>               </span>… </span><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>以下略<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>} ;<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: dummy()<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>               </span>- </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>沒有定義之中斷向量的中斷處理函式<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>***************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
mso-bidi-font-family:新細明體;color:blue'>void dummy(void)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
mso-bidi-font-family:新細明體;color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
mso-bidi-font-family:新細明體;color:blue'><span style='mso-tab-count:1'>        </span>//
</span><b style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>沒有定義之中斷向量，正常狀況不應該被觸發<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>// i.e. </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>正常狀況時，這個<span lang=EN-US>function</span>不應該被執行<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>// </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>無限迴圈，系統停止運作<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span></span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>while(1) ;<b style='mso-bidi-font-weight:normal'><span
style='mso-tab-count:1'>        </span></b></span><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體;color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
mso-bidi-font-family:新細明體;color:blue'>}<o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359597"><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>3-0</span>：中斷向量表範例</span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『基本上中斷向量表的實作就是一個<span
lang=EN-US>C</span>的陣列，當然也可以用組合語言寫，但意義是一樣的。實際上<span lang=EN-US>CPU</span>只有記憶體位址的觀念，當然不知道<span
lang=EN-US>C</span>的陣列是什麼；但說穿了<b style='mso-bidi-font-weight:normal'>所謂的中斷向量表，就是從某個位址開始，每<span
lang=EN-US>4</span>個<span lang=EN-US>byte</span></b><a style='mso-footnote-id:
ftn6' href="#_ftn6" name="_ftnref6" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[6]</span></span><![endif]></span></span></span></a><b style='mso-bidi-font-weight:
normal'>為一個單位<span lang=EN-US>(entry)</span>，每一個<span lang=EN-US>entry</span>記錄一個函數的位址</b>，就這麼簡單。依照這個定義你再回頭看<span
lang=EN-US>vector.c</span>，是不是就比較清楚了？』</span><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『這樣我懂了；再請問一下，中斷向量表<span lang=EN-US>(vector[])</span>中填了一堆<span
lang=EN-US>dummy</span>，又是代表什麼意義？<span style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『<span lang=EN-US>CPU(</span>或中斷控制器<span
lang=EN-US>)</span>會為每一個中斷編一個序列號，而中斷可以分為兩個種類，一種是<span lang=EN-US>CPU</span>自行產生的內部中斷<span
lang=EN-US>(</span>又稱例外 <span lang=EN-US>- exception)</span>，以及由周邊設備產生的外部中斷。以我們的程式為例，第<span
lang=EN-US>0</span>號中斷就是<span lang=EN-US>Reset</span>中斷<span lang=EN-US>(</span>請看程式的注解<span
lang=EN-US>)</span>，第<span lang=EN-US>1</span>號中斷是“除以<st1:chmetcnv TCSC="0"
NumberType="1" Negative="False" HasSpace="False" SourceValue="0" UnitName="”"
w:st="on"><span lang=EN-US>0</span>”</st1:chmetcnv>的中斷<a style='mso-footnote-id:
ftn7' href="#_ftn7" name="_ftnref7" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[7]</span></span><![endif]></span></span></span></a>，這兩個都屬於內部中斷；而第<span
lang=EN-US>6</span>、<span lang=EN-US>7</span>號中斷是<span lang=EN-US>port</span>中斷，表示<span
lang=EN-US>CPU</span>的某一根<span lang=EN-US>PIN</span>腳接到某個裝置，若這根<span
lang=EN-US>PIN</span>腳發生了電位變化<span lang=EN-US>(</span>例如：高電位<span lang=EN-US>(High)</span></span><span
lang=EN-US style='font-family:Wingdings;mso-ascii-font-family:微軟正黑體;mso-fareast-font-family:
微軟正黑體;mso-hansi-font-family:微軟正黑體;mso-char-type:symbol;mso-symbol-font-family:
Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>à</span></span><span
style='font-family:"微軟正黑體","sans-serif"'>低電位<span lang=EN-US>(Low) )</span>就會產生這個中斷，這個就是所謂的外部中斷。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>依據系統要實現的應用不同，通常我們不會用到所有<span
lang=EN-US>CPU</span>的中斷，也就是說我們不需要實現每一個中斷處理程式；舉例來說，<span lang=EN-US>Timer1
timeout</span>時會引發第<span lang=EN-US>11</span>號中斷<span lang=EN-US>(</span>請回頭看一下<span
lang=EN-US>vector.c)</span>，而我們的應用只會用到<span lang=EN-US>Timer0</span>，所以根本不可能產生第<span
lang=EN-US>11</span>號中斷，去實現第<span lang=EN-US>11</span>號中斷的<span lang=EN-US>ISR</span>也是沒有意義的，這就是<span
lang=EN-US>dummy</span>這個中斷處理程式存在的原因，你可以看到它根本沒做任何事情。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>如果再深入討論這個話題的話，沒有用到的中斷不但不應該產生，而且當其產生時還應該視為一種錯誤，除了上面提過的除以<span
lang=EN-US>0</span>的錯誤外，例如靜電所產生的硬體雜訊也可能引發不應該產生的外部中斷，開發電子產品時這些狀況都要處理；所以真正系統中的<span
lang=EN-US>dummy()</span>可就不是那麼簡單了。經過這些說明，你搞懂<span lang=EN-US>vector.c</span>了沒有？』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『我現在好像已經能了解這個<span lang=EN-US>sample code</span>裡每一個程式的意義了：在上述的中斷向量表中有兩個不是<span
lang=EN-US>dummy()</span>的中斷向量，第一個指到<span lang=EN-US>boot() (</span>第<span
lang=EN-US>0</span>號中斷<span lang=EN-US>)</span>，<span lang=EN-US>CPU</span>啟動後會產生<span
lang=EN-US>RESET</span>中斷，而<span lang=EN-US>boot()</span>就是<span lang=EN-US>Reset</span>中斷的<span
lang=EN-US>ISR</span>，所以<span lang=EN-US>CPU</span>啟動後第一個被執行的程式就是<span
lang=EN-US>boot()</span>。另一個不是<span lang=EN-US>dummy()</span>的中斷向量是則指向<span
lang=EN-US>drv_isr_timer0() (</span>第<span lang=EN-US>10</span>號中斷<span
lang=EN-US>)</span>，當<span lang=EN-US>Timer0</span>每隔一段時間<span lang=EN-US>timeout</span>時，<span
lang=EN-US>CPU</span>會引發第<span lang=EN-US>10</span>號中斷，所以<span lang=EN-US>drv_isr_timer0()</span>會被呼叫，這個<span
lang=EN-US>ISR</span>要作的就是開關<span lang=EN-US>LED</span>，以製造閃爍的效果。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『沒錯，只要你弄清楚計算機系統的啟動流程的話，這個程式就是這麼簡單。沒關係，我今天沒那麼忙，我們把其他的程式也看一下，看看還有沒有其他問題。』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304916924"><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>Boot</span></a><span
style='mso-bookmark:_Toc304916924'><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>(</span>啟動程式<span lang=EN-US>)</span></span></span><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『接下來我們來看啟動程式 <span
lang=EN-US>– boot.c</span>，由剛剛的推導，你應該已經了解為什麼它是<span lang=EN-US>CPU</span>啟動後第一個被執行的函數了。初學者在看這個程式的時候，先不要理會被呼叫的各個函數的詳細內容，只要知道這些函數是做什麼的即可，這個程式的註解還寫得蠻清楚的，應該不會有困難才對；你要學習的重點是<span
lang=EN-US>boot</span>程式在這個階段到底要負責做什麼，了解嗎？』</span><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『其實看註解就知道了，<span lang=EN-US>CPU</span>啟動後，第一個被執行的程式至少要負責以下的動作：<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo17;tab-stops:list 69.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>A.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>設定某些重要的<span
lang=EN-US>CPU</span>暫存器，特別是堆疊指標暫存器<a style='mso-footnote-id:ftn8' href="#_ftn8"
name="_ftnref8" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[8]</span></span><![endif]></span></span></span></a><span lang=EN-US>(SP</span>，<span
lang=EN-US>Stack Pointer)</span>與狀態暫存器<a style='mso-footnote-id:ftn9'
href="#_ftn9" name="_ftnref9" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[9]</span></span><![endif]></span></span></span></a><span lang=EN-US>(Status
Register)<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
mso-line-height-rule:exactly;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape
 id="_x0000_i1027" type="#_x0000_t75" style='width:468pt;height:252pt'>
 <v:imagedata src="/b2/CH03_02.files/image005.jpg" o:title="03-06-ARM的狀態在存器(PSR)"/>
</v:shape><![endif]--><![if !vml]><img width=624 height=336
src="/b2/CH03_02.files/image006.jpg" v:shapes="_x0000_i1027"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359598"><span style='font-family:"微軟正黑體","sans-serif"'>圖<span
lang=EN-US>3-6</span>：<span lang=EN-US>ARM</span>的狀態暫存器<span lang=EN-US>(PSR)</span></span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo17;tab-stops:list 69.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>B.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>CPU</span><span
style='font-family:"微軟正黑體","sans-serif"'>各部份功能初始化<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo17;tab-stops:list 69.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>C.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>系統初始化<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo17;tab-stops:list 69.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>D.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>呼叫應用程式的主程式<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:69.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo17;tab-stops:list 69.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>E.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>結束<span
lang=EN-US>(</span>通常應用程式的主程式不會返回<span lang=EN-US>boot</span>程式<span
lang=EN-US>)<o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>boot.c<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:20.95pt;text-indent:27.0pt;mso-char-indent-count:
2.25;line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:
none;text-autospace:none'><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>BOOT</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>程式 <span lang=EN-US>– CPU</span>啟動後的第一行程式<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>***************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: boot()<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>CPU</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>啟動後被執行的第一個<span lang=EN-US>function<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>RESET</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>中斷的<span lang=EN-US>ISR<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>__interrupt</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'> void boot(void)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>                </span><b style='mso-bidi-font-weight:normal'>// </b></span><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>設定<span lang=EN-US>SP(stack point)</span>暫存器<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>//</span></b><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>asm(&quot;xld.w<span
style='mso-spacerun:yes'>      </span>%r15,0x2000&quot;);<span
style='mso-spacerun:yes'>  </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>asm(&quot;ld.w<span
style='mso-spacerun:yes'>       </span>%sp,%r15&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>設定<span lang=EN-US>CPU</span>的狀態暫存器<span lang=EN-US>(Processor
Status Register)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>asm(&quot;xld.w<span
style='mso-spacerun:yes'>      </span>%r15,0x200010&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>asm(&quot;ld.w<span
style='mso-spacerun:yes'>       </span>%psr,%r15&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>// CPU</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>初始化<span lang=EN-US>(</span>各個<span lang=EN-US>function</span>的意義可先不理會<span
lang=EN-US>)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>                </span>_init_pll();<span style='mso-tab-count:3'>                       </span>//
Initialize PLL on boot time<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>_init_bbcu();<span style='mso-tab-count:
3'>                  </span>// Initialize BBCU on boot time<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>                </span>_init_ebcu();<span style='mso-tab-count:3'>                  </span>//
Initialize EBCU on boot time<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>                </span>_init_cache();<span style='mso-tab-count:3'>                        </span>//
Initialize Cache on boot time<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>_init_int();<span style='mso-tab-count:
3'>                      </span>// Initialize interrupt controller<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>系統初始化<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>_init_sys();<span
style='mso-spacerun:yes'>    </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>呼叫主程式<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:2'>                </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>main();<span style='mso-spacerun:yes'> 
</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
"微軟正黑體","sans-serif";color:blue'>一般的嵌入式系統，主程式不會返回<span lang=EN-US>boot</span>程式<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>                </span>exit() ;<span style='mso-tab-count:1'>     </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: _init_xxx()<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>以下是<span lang=EN-US>CPU</span>初始化以及系統初始化的函數<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>這些函數通常都是由<span lang=EN-US>CPU</span>廠商提供之<span
lang=EN-US>sample code</span>修改而來，<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:20.95pt;text-indent:27.0pt;mso-char-indent-count:
2.25;line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:
none;text-autospace:none'><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>正確性應該沒有問題 <span lang=EN-US>(</span>實務上當然會依據自己硬體的特性，作稍微的修正<span
lang=EN-US>)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>因為這不是本節的重點，所以全部略過<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>…</span><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>略<span lang=EN-US><o:p></o:p></span></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359599"><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>3-1</span>：<span lang=EN-US>Boot</span>程式範例</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『基本上沒錯，關於這個程式有什麼問題要問的嗎？』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『問題可多了，<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-27.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l0 level1 lfo20;tab-stops:list 54.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>Q1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>函數定義前面怎麼有“<span
lang=EN-US>__interrupt</span>”這個東西，它應該不是標準<span lang=EN-US>C</span>語言的關鍵字吧？<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-27.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l0 level1 lfo20;tab-stops:list 54.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>Q2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>那個<span
lang=EN-US>asm(“….”)</span>好像叫做<span lang=EN-US>inline assembly</span>吧，為什麼要在<span
lang=EN-US>C</span>程式裡面夾雜組合語言？<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-27.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l0 level1 lfo20;tab-stops:list 54.0pt;mso-layout-grid-align:
none;text-autospace:none'><![if !supportLists]><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>Q3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>boot()</span><span
style='font-family:"微軟正黑體","sans-serif"'>的最後一行是呼叫<span lang=EN-US>exit()</span>；我想不通的是，一般<span
lang=EN-US>PC</span>程式結束就是視窗被關掉，然後回到<span lang=EN-US>Windows</span>，像這樣的系統，呼叫<span
lang=EN-US>exit()</span>是回到哪裡去？<span style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『<span lang=EN-US>OK</span>，我一一回答你的三個問題：』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-27.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l4 level1 lfo21;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>A1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>“<span
lang=EN-US>__interrupt</span>”並不是<span lang=EN-US>C</span>語言的標準，它是這個<span
lang=EN-US>cross-compiler</span>自訂的關鍵字，寫在代表中斷處理程式的函數定義前面。這個關鍵字並不是只用來區別一般函數和<span
lang=EN-US>ISR</span>那麼簡單，實際上<span lang=EN-US>ISR</span>的開頭和結尾要做的動作和一般<span
lang=EN-US>C</span>語言函數不一樣，詳情請參考下表<a style='mso-footnote-id:ftn10'
href="#_ftn10" name="_ftnref10" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[10]</span></span><![endif]></span></span></span></a>；所以<span
lang=EN-US>compiler</span>會對有加上“<span lang=EN-US>__interrupt</span>”的函數作特殊的處理，亦即產生不同的組合語言指令。對程式設計師而言只需要加上這個關鍵字，就無須理會細節，可以和寫一般函數一樣的方式寫<span
lang=EN-US>ISR</span>。 總之你現在先記得，寫<span lang=EN-US>ISR</span>時要加上這個關鍵字<a
style='mso-footnote-id:ftn11' href="#_ftn11" name="_ftnref11" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[11]</span></span><![endif]></span></span></span></a>，以後我會再教你箇中道理的。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=67 valign=top style='width:50.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
  mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:normal'><span
  style='font-family:"微軟正黑體","sans-serif"'>一般函數<span lang=EN-US><o:p></o:p></span></span></b></p>
  </td>
  <td width=310 valign=top style='width:232.7pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
  mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:normal'><span
  style='font-family:"微軟正黑體","sans-serif"'>中斷處理程式<span lang=EN-US>(ISR)<o:p></o:p></span></span></b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=67 valign=top style='width:50.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
  style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif"'>開頭<span
  lang=EN-US><o:p></o:p></span></span></b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  style='font-family:"微軟正黑體","sans-serif"'>只需將返回位址存在堆疊<span lang=EN-US>(Stack)</span>中<span
  lang=EN-US><o:p></o:p></span></span></p>
  </td>
  <td width=310 valign=top style='width:232.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>1. </span><span
  style='font-family:"微軟正黑體","sans-serif"'>必須將返回位址<span lang=EN-US>(</span>發生中斷的位址<span
  lang=EN-US>)</span>以及<span lang=EN-US>CPU</span>狀態暫存器存在堆疊中<span lang=EN-US><o:p></o:p></span></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>2. </span><span
  style='font-family:"微軟正黑體","sans-serif"'>儲存所有<span lang=EN-US>CPU</span>暫存器的值到堆疊中<span
  lang=EN-US><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;mso-yfti-lastrow:yes'>
  <td width=67 valign=top style='width:50.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
  style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif"'>結尾<span
  lang=EN-US><o:p></o:p></span></span></b></p>
  </td>
  <td width=180 valign=top style='width:135.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  style='font-family:"微軟正黑體","sans-serif"'>使用<span lang=EN-US>CPU</span>的<span
  lang=EN-US>ret</span>指令<span lang=EN-US>(return)<o:p></o:p></span></span></p>
  </td>
  <td width=310 valign=top style='width:232.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>1. </span><span
  style='font-family:"微軟正黑體","sans-serif"'>從堆疊中回存所有<span lang=EN-US>CPU</span>暫存器的值<span
  lang=EN-US><o:p></o:p></span></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>2. </span><span
  style='font-family:"微軟正黑體","sans-serif"'>使用<span lang=EN-US>CPU</span>的<span
  lang=EN-US>iret</span>指令<span lang=EN-US>(interrupt return)<o:p></o:p></span></span></p>
  </td>
 </tr>
</table>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359600"><span style='font-family:"微軟正黑體","sans-serif"'>表<span
lang=EN-US>3-2</span>：一般函數與<span lang=EN-US>ISR</span>的不同點</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-27.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l4 level1 lfo21;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>A2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>通常我會用組合語言來寫這個啟動程式，因為無可避免的必需去設定<span
lang=EN-US>CPU</span>內部的暫存器，而這些動作是很難用<span lang=EN-US>C</span>語言去寫的<a
style='mso-footnote-id:ftn12' href="#_ftn12" name="_ftnref12" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[12]</span></span><![endif]></span></span></span></a>。在你這個<span
lang=EN-US>sample code</span>中是用<span lang=EN-US>C</span>來實作啟動程式，所以只能用<span
lang=EN-US>inline assembly(</span>內嵌式組合語言<span lang=EN-US>)</span>來設定堆疊指標與狀態暫存器。其實組合語言並不是那麼難看懂，程式中這兩行的意義是：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>把<span lang=EN-US>0x2000</span>這個值放到<span lang=EN-US>R15</span>暫存器中<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>asm(&quot;xld.w<span
style='mso-spacerun:yes'>      </span>%r15,0x2000&quot;);<span
style='mso-spacerun:yes'>          </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>把<span lang=EN-US>R15</span>暫存器中的值放到<span lang=EN-US>SP</span>暫存器中<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>asm(&quot;ld.w<span
style='mso-spacerun:yes'>       </span>%sp,%r15&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
"微軟正黑體","sans-serif";color:blue'>上面兩行組合語言指令合起來的意義就是：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<span
style='mso-spacerun:yes'>  </span></span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>把<span
lang=EN-US>0x2000</span>的值設給<span lang=EN-US>SP</span>，也就是設定堆疊從位址<span
lang=EN-US>0x2000</span>開始<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>目前這些組合語言程式看不懂沒關係，通常我們不會花太多時間學某顆<span
lang=EN-US>CPU</span>的組合語言；不然每顆<span lang=EN-US>CPU</span>的組合語言寫法都可能不同，我們做韌體的哪有那麼多時間通通弄熟？將來我會教你我們都是怎麼寫組合語言程式的。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-27.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l4 level1 lfo21;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>A3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>嵌入式系統基本上是不結束的，會持續運作直到電源被切掉為止，在此期間都得讓<span
lang=EN-US>CPU</span>有指令可以執行。所以在嵌入式系統的主程式中一定會看到一個<b style='mso-bidi-font-weight:
normal'>無窮迴圈</b><span lang=EN-US>(</span>有些書本稱之為<span lang=EN-US>super loop)</span>，迴圈內要不就一直執行著某件工作，例如水族箱的恆溫系統，一直測量溫度，並持續改變加熱器的溫度，以將水溫維持在一定溫度。要不就是讓系統進入省電狀態，直到有外部輸入產生中斷<span
lang=EN-US>(</span>如按下鍵盤或觸控式螢幕<span lang=EN-US>)</span>，<span lang=EN-US>CPU</span>才會恢復全速模式，等處裡完外部事件後，就又進入省電模式；一般的手持式裝置為了延長電池壽命，應該都是這樣的作法。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『你說的沒錯，主程式的最後面的確是一個無限迴圈；所以當啟動程式<span lang=EN-US>(boot())</span>將控制權交給主程式<span
lang=EN-US>(main())</span>後，根本就永遠不會返回<span lang=EN-US>boot()</span>。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『沒錯！<span
lang=EN-US>boot()</span>最後呼叫了<span lang=EN-US>main()</span>，<span lang=EN-US>main()</span>可以說是這個嵌入式系統的應用程式的主程式，接下來我們來看看<span
lang=EN-US>main()</span>』</span><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304916925"><span style='font-family:"微軟正黑體","sans-serif"'>主程式</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『我終於漸漸搞懂<b style='mso-bidi-font-weight:normal'><span
lang=EN-US>boot</span>程式</b>和<b style='mso-bidi-font-weight:normal'>應用程式</b>的概念了：當<span
lang=EN-US>CPU</span>順利啟動，且硬體已初始化完畢，接下來就是將控制權交給應用程式。這個範例程式的目的是讓<span
lang=EN-US>LED</span>持續每<st1:chmetcnv TCSC="0" NumberType="1" Negative="False"
HasSpace="False" SourceValue="100" UnitName="m" w:st="on"><span lang=EN-US>100m</span></st1:chmetcnv><span
lang=EN-US>s</span>閃爍一次，<span lang=EN-US>main()</span>裡的所有程式就是為了達成這個目的。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『這麼說基本上沒錯，但這是因為現在討論的這個例子還算為簡單，否則在<span
lang=EN-US>boot</span>程式和應用程式間還有一層<b style='mso-bidi-font-weight:normal'>系統程式</b>，你可以把這一層想像成作業系統加上驅動程式。<span
lang=EN-US>main()</span>這個程式比較單純，應該沒有問題吧。』</span><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>main.c - </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>主程式<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>               </span>- </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>目的<span lang=EN-US>: </span>讓<span
lang=EN-US>LED</span>持續每<span lang=EN-US>100ms</span>閃爍一次<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>***************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: main()<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>應用程式的主程式<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>void main(void)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>設定<span
lang=EN-US>Timer0</span>，每<span lang=EN-US>100ms</span>會<span lang=EN-US>timeout</span>一次<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:Wingdings;mso-ascii-font-family:
微軟正黑體;mso-fareast-font-family:微軟正黑體;mso-hansi-font-family:微軟正黑體;color:blue;
mso-char-type:symbol;mso-symbol-font-family:Wingdings'><span style='mso-char-type:
symbol;mso-symbol-font-family:Wingdings'>è</span></span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'> </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>每<span lang=EN-US>100ms</span>產生一次<span
lang=EN-US>TIMER0-TIMEOUT</span>中斷<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>drv_init_timer0(100);<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// LED </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>驅動程式初始化<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>drv_init_LED();<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>// </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>啟動<span lang=EN-US>Timer 0<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-indent:24.0pt;line-height:18.0pt;mso-line-height-rule:exactly'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>drv_start_timer0();<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
forever loop – </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>無限迴圈<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
TIMER0-TIMEOUT</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>中斷會持續產生，<span lang=EN-US>LED</span>也會持續閃爍<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>while(1) ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>}<o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359601"><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>3-2</span>：主程式<span lang=EN-US>main()</span>範例</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『程式中只對<span lang=EN-US>timer</span>和<span lang=EN-US>LED</span>做了初始化的動作，接下來啟動<span
lang=EN-US>timer</span>，然後就是一個無限迴圈，迴圈內什麼事都沒做。原本我覺得很奇怪，為什麼無限迴圈內沒有開關<span
lang=EN-US>LED</span>的動作，也沒有跳離的機制；經過剛剛的講解，我現在應該已經弄懂了：<span lang=EN-US>LED</span>開關的動作會在定時引發的<span
lang=EN-US>timer</span>中斷處理程式中做，而嵌入式系統是不會結束的，所以<span lang=EN-US>main()</span>的結尾就是一個<span
lang=EN-US>while(1)</span>這樣的無限迴圈。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>這樣程式的寫法對我這種習慣寫<span lang=EN-US>PC</span>程式的人的確是一種震撼，一般我們都要避免寫出跳不出來的無限迴圈，可是在嵌入式系統中的無限迴圈卻是必須的。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『無限迴圈是很好用的技巧，在除錯時也會用到<a
style='mso-footnote-id:ftn13' href="#_ftn13" name="_ftnref13" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[13]</span></span><![endif]></span></span></span></a>。』</span><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:新細明體'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304916926"><span style='font-family:"微軟正黑體","sans-serif"'>驅動程式<span
lang=EN-US>1 - Timer</span></span></a><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『我再歸納一下這個範例程式的運作流程：<span style='display:none;
mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l18 level2 lfo12;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>a.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>程式中的中斷向量表是一個陣列，它會被定址在<span
lang=EN-US>CPU</span>指定的啟動位址；中斷向量表中<span lang=EN-US>RESET ISR</span>的中斷向量指到我們的<span
lang=EN-US>boot</span>程式。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l18 level2 lfo12;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>b.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>CPU</span><span
style='font-family:"微軟正黑體","sans-serif"'>啟動後，會引發<span lang=EN-US>RESET</span>中斷，所以<span
lang=EN-US>boot</span>程式會被執行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l18 level2 lfo12;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>c.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>Boot</span><span
style='font-family:"微軟正黑體","sans-serif"'>程式負責初始化<span lang=EN-US>CPU</span>，並將控制權交予應用程式的主程式。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l18 level2 lfo12;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>d.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>主程式則僅初始化它會用到的硬體設備，在本例中則是設定<span
lang=EN-US>timer</span>與<span lang=EN-US>LED</span>；最後則是一個無限迴圈。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:72.0pt;text-indent:-27.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l18 level2 lfo12;tab-stops:list 72.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>e.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>在本例中，每<st1:chmetcnv
TCSC="0" NumberType="1" Negative="False" HasSpace="False" SourceValue="100"
UnitName="m" w:st="on"><span lang=EN-US>100m</span></st1:chmetcnv><span
lang=EN-US>s</span>會產生一次<span lang=EN-US>timer</span>中斷，亦即<span lang=EN-US>timer
ISR</span>每<st1:chmetcnv TCSC="0" NumberType="1" Negative="False"
HasSpace="False" SourceValue="100" UnitName="m" w:st="on"><span lang=EN-US>100m</span></st1:chmetcnv><span
lang=EN-US>s</span>會被執行一次，由<span lang=EN-US>timer ISR</span>負責<span lang=EN-US>LED</span>的開關，以製造閃爍的效果。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape
 id="_x0000_i1028" type="#_x0000_t75" style='width:495pt;height:292.5pt'>
 <v:imagedata src="/b2/CH03_02.files/image007.jpg" o:title="03-07-本章範例中程式的運作流程"/>
</v:shape><![endif]--><![if !vml]><img width=660 height=390
src="/b2/CH03_02.files/image008.jpg" v:shapes="_x0000_i1028"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359602"><span style='font-family:"微軟正黑體","sans-serif"'>圖<span
lang=EN-US>3-7</span>：本章範例中程式的運作流程</span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『最後讓我們來看看驅動程式吧，這個範例包含了兩個驅動程式
<span lang=EN-US>– drv_timer0.c</span>以及<span lang=EN-US>drv_LED.c</span>。有時候我們會把驅動程式分成兩個種類，一種是會產生中斷的，例如本例中的<span
lang=EN-US>timer</span>；另一種是不會產生中斷的，本例中的<span lang=EN-US>LED</span>就是其一。首先是來看<span
lang=EN-US>drv_timer0.c</span>，先不管控制<span lang=EN-US>timer</span>的細節，只要看這個程式中各個函數的意義就好，有什麼問題嗎？』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『這個程式是個比較單純的模組，它包含了三個<span lang=EN-US>API</span>以及一個<span
lang=EN-US>ISR</span>，分別是：設定<span lang=EN-US>timer</span>、啟動<span lang=EN-US>timer</span>、停止<span
lang=EN-US>timer</span>以及<span lang=EN-US>timer</span>中斷處理程式；我想這個程式要注意的事項只有一個，就是在定義代表<span
lang=EN-US>ISR</span>的函數時前頭必須加上“<span lang=EN-US>__interrupt</span>”關鍵字，其他細節我去查<span
lang=EN-US>CPU data sheet</span>中有關<span lang=EN-US>timer</span>的相關章節就可以了。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>drv_timer0.c <o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>- </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>驅動程式模組 <span lang=EN-US>– </span>第<span
lang=EN-US>0</span>號<span lang=EN-US>Timer<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>**************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: drv_init_timer0<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>初始化<span lang=EN-US>timer0
(</span>設定<span lang=EN-US>CPU</span>中<span lang=EN-US>timer0</span>的相關暫存器<span
lang=EN-US>)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>參數<span lang=EN-US>1(timout_intiva)
– </span>設定多久產生一次<span lang=EN-US>timeout</span>中斷<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>               </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>單位為<span lang=EN-US>ms(1/100
second)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>void drv_init_timer0(int timout_intival)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span></span><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>內容略<span lang=EN-US>...<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>ISR : </span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>drv_start_timer0<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>開始計時，當到達指定時間時，<span
lang=EN-US>CPU</span>會引發<span lang=EN-US>Timer0</span>中斷<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>void drv_start_timer0(void)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span></span><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>內容略<span lang=EN-US>...<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>ISR : </span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>drv_stop_timer0<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>結束計時<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>void drv_stop_timer0(void)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span></span><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>內容略<span lang=EN-US>...<o:p></o:p></span></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>ISR : drv_isr_timer0<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Time0 timeout</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>時產生中斷的<span lang=EN-US>ISR</span>，第一次進來時點亮<span
lang=EN-US>LED<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>第二次進來時關閉<span lang=EN-US>LED</span>，依此類推<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>__interrupt void drv_isr_timer0(void)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>static int counter = 0 ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>if(counter % 2 == 0)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>drv_LED_on() ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>else<span style='mso-tab-count:1'>       </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-indent:24.0pt;line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LED_off() ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>}<o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359603"><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>3-3</span>：<span lang=EN-US>Timer</span>驅動程式範例</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304916927"><span style='font-family:"微軟正黑體","sans-serif"'>驅動程式<span
lang=EN-US>2 - LED</span></span></a><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『<span lang=EN-US>LED</span>這個裝置不會產生中斷，驅動程式中包含的<span
lang=EN-US>API</span>更為單純，只有初始化<span lang=EN-US>LED</span>、點亮<span lang=EN-US>LED</span>以及熄滅<span
lang=EN-US>LED</span>三個函數而已。我對各個函數代表的意義沒有疑問，但函數內的實作方法我則有幾的地方看不懂。<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『<b
style='mso-bidi-font-weight:normal'>這個程式全部都是用標準<span lang=EN-US>C</span>寫的</b>，怎麼會看不懂呢？』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>/***************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>drv_LED.c <o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:66.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l0 level3 lfo20;tab-stops:list 66.0pt;
mso-layout-grid-align:none;text-autospace:none'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";color:blue'><span
style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>驅動程式模組 <span lang=EN-US>–
LED<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:66.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l0 level3 lfo20;tab-stops:list 66.0pt;
mso-layout-grid-align:none;text-autospace:none'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";color:blue'><span
style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>根據硬體設計，<span lang=EN-US>CPU</span>用<span
lang=EN-US>P10</span>這根<span lang=EN-US>PIN</span>與<span lang=EN-US>LED</span>相接<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:66.0pt;text-indent:-18.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l0 level3 lfo20;tab-stops:list 66.0pt;
mso-layout-grid-align:none;text-autospace:none'><![if !supportLists]><span
lang=EN-US style='mso-fareast-font-family:"Times New Roman";color:blue'><span
style='mso-list:Ignore'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>當<span lang=EN-US>P10</span>為高電位<span
lang=EN-US>(High)</span>時<span lang=EN-US>LED</span>會亮，低電位時<span lang=EN-US>LED</span>熄掉<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>**************************************************************/<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: </span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>drv_init_LED<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>初始化連接<span lang=EN-US>LED</span>與<span
lang=EN-US>CPU</span>的<span lang=EN-US>I/O port – P10<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>void<b style='mso-bidi-font-weight:normal'> </b>drv_init_LED(void)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
"微軟正黑體","sans-serif";color:blue'>設定<span lang=EN-US>P10</span>為<span
lang=EN-US>output PIN<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>*(volatile unsigned
char*)0x300023 |= 0x02 ;<span style='mso-tab-count:1'> </span> // 0000 0010<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;text-indent:27.0pt;mso-char-indent-count:
2.25;line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:
none;text-autospace:none'><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>// LED</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>預設狀態 <span lang=EN-US>– OFF<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
"微軟正黑體","sans-serif";color:blue'>設定<span lang=EN-US>P10</span>為<span
lang=EN-US>LOW</span></span></b><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-family:Wingdings;mso-ascii-font-family:微軟正黑體;mso-fareast-font-family:
微軟正黑體;mso-hansi-font-family:微軟正黑體;color:blue;mso-char-type:symbol;mso-symbol-font-family:
Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>à</span></span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>LED</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>熄掉<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>*(volatile unsigned
char*)0x300022&amp;=0xfd<span style='mso-tab-count:1'>    </span>// 1111 1101<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: </span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>drv_LED_off()<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>關閉<span lang=EN-US>LED<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>void </span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LED_off
(void)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
"微軟正黑體","sans-serif";color:blue'>設定<span lang=EN-US>P10</span>為<span
lang=EN-US>LOW</span></span></b><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-family:Wingdings;mso-ascii-font-family:微軟正黑體;mso-fareast-font-family:
微軟正黑體;mso-hansi-font-family:微軟正黑體;color:blue;mso-char-type:symbol;mso-symbol-font-family:
Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>à</span></span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>LED</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>熄掉<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>*(volatile unsigned
char*)0x300022&amp;=0xfd<span style='mso-tab-count:1'>    </span>// 1111 1101<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: </span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>drv_LED_on()<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>開啟<span lang=EN-US>LED<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>void </span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LED_on
(void)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//
</span></b><b style='mso-bidi-font-weight:normal'><span style='font-family:
"微軟正黑體","sans-serif";color:blue'>設定<span lang=EN-US>P10</span>為<span
lang=EN-US>HIGH</span></span></b><b style='mso-bidi-font-weight:normal'><span
lang=EN-US style='font-family:Wingdings;mso-ascii-font-family:微軟正黑體;mso-fareast-font-family:
微軟正黑體;mso-hansi-font-family:微軟正黑體;color:blue;mso-char-type:symbol;mso-symbol-font-family:
Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>à</span></span></b><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>LED</span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>點亮<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:12.05pt;text-indent:27.0pt;mso-char-indent-count:
2.25;line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:
none;text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>*(volatile unsigned char*)0x300022|=0x2 ;<span style='mso-tab-count:
1'>      </span>// 0000 0010<span style='mso-tab-count:2'>         </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359604"><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>3-4</span>：<span lang=EN-US>LED</span>驅動程式範例</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『“<b style='mso-bidi-font-weight:normal'><span
lang=EN-US>volatile</span></b>”也是標準<span lang=EN-US>C</span>的關鍵字嗎？我以前從來沒看過這樣的寫法！<span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『“<b
style='mso-bidi-font-weight:normal'><span lang=EN-US>volatile</span></b>”當然是標準<span
lang=EN-US>C</span>的關鍵字，通常只有在寫驅動程式時才會用到，這也難怪你之前沒看過這樣的寫法。你知道<span lang=EN-US>C
compiler</span>都會對程式做最佳化吧，舉個例子來說：』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0cm 5.4pt 0cm 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
  mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:normal'><span
  style='font-family:"微軟正黑體","sans-serif"'>原始程式<span lang=EN-US><o:p></o:p></span></span></b></p>
  </td>
  <td width=382 valign=top style='width:286.7pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
  mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:normal'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>C compiler</span></b><b
  style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif"'>最佳化後的程式<span
  lang=EN-US><o:p></o:p></span></span></b></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes'>
  <td width=175 valign=top style='width:131.4pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>void fun(void)<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>{<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>int A , B;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>A = 1 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>A = 1 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>A = 1 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>B = 1 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>B = 2 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>B = 3 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>}<o:p></o:p></span></p>
  </td>
  <td width=382 valign=top style='width:286.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>void fun(void)<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>{<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>int A,B ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>A = 1 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>//A = 1 ;<o:p></o:p></span></b></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>//A = 1 ;<span style='mso-spacerun:yes'>  
  </span></span></b><b style='mso-bidi-font-weight:normal'><span lang=EN-US
  style='font-family:Wingdings;mso-ascii-font-family:微軟正黑體;mso-fareast-font-family:
  微軟正黑體;mso-hansi-font-family:微軟正黑體;mso-char-type:symbol;mso-symbol-font-family:
  Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>ç</span></span></b><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>C
  compiler</span></b><b style='mso-bidi-font-weight:normal'><span
  style='font-family:"微軟正黑體","sans-serif"'>認為這兩行是沒有意義的<span lang=EN-US><o:p></o:p></span></span></b></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span><b style='mso-bidi-font-weight:normal'>//B =
  1 ;<o:p></o:p></b></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>//B = 2 ;</span></b><span lang=EN-US
  style='font-family:"微軟正黑體","sans-serif"'><span style='mso-spacerun:yes'>  
  </span></span><b style='mso-bidi-font-weight:normal'><span lang=EN-US
  style='font-family:Wingdings;mso-ascii-font-family:微軟正黑體;mso-fareast-font-family:
  微軟正黑體;mso-hansi-font-family:微軟正黑體;mso-char-type:symbol;mso-symbol-font-family:
  Wingdings'><span style='mso-char-type:symbol;mso-symbol-font-family:Wingdings'>ç</span></span></b><b
  style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>C
  compiler</span></b><b style='mso-bidi-font-weight:normal'><span
  style='font-family:"微軟正黑體","sans-serif"'>認為這兩行是沒有意義的</span></b><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
  style='mso-spacerun:yes'> </span>B = 3 ;<o:p></o:p></span></p>
  <p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
  lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>}<o:p></o:p></span></p>
  </td>
 </tr>
</table>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359605"><span style='font-family:"微軟正黑體","sans-serif"'>表<span
lang=EN-US>3-1</span>：<span lang=EN-US>volatile</span>變數與最佳化</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『在一般的狀況，<span
lang=EN-US>C compiler</span>會把無效的程式剔除，除了可以減小程式的<span lang=EN-US>size</span>，也能加快執行速度；可是如果某些狀況，連續做三次<span
lang=EN-US>A=1</span>是有意義的，<span lang=EN-US>C compiler</span>此舉就可說是幫倒忙了！“<b
style='mso-bidi-font-weight:normal'><span lang=EN-US>volatile</span></b>”這個關鍵字的作用就是用來告訴<span
lang=EN-US>C compiler</span>，凡是宣告成“<b style='mso-bidi-font-weight:normal'><span
lang=EN-US>volatile</span></b>”型態的變數，就不需對其作上述的最佳化。』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『恕我資質愚鈍，我實在想不出什麼狀況連續做三次<span lang=EN-US>A=1</span>是有意義的？就算做了一百次，<span
lang=EN-US>A</span>的值還不就是<span lang=EN-US>1</span>！<span style='display:none;
mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『一般的狀況是這樣的沒錯，但寫驅動程式時可能就不是。假設<span
lang=EN-US>A</span>與<span lang=EN-US>B</span>代表某個設備的暫存器，當它們的值是<span lang=EN-US>1</span>、<span
lang=EN-US>2</span>、<span lang=EN-US>3</span>時分別代表執行三種不同的功能，你再回頭看一下這個例子，<span
lang=EN-US>A=1</span>做三次，表示我要這個設備執行功能<span lang=EN-US>1</span>三次；讓<span
lang=EN-US>B</span>分別等於<span lang=EN-US>1</span>、<span lang=EN-US>2</span>、<span
lang=EN-US>3</span>，則表示我要這個設備分別執執行功能<span lang=EN-US>1</span>、<span lang=EN-US>2</span>、<span
lang=EN-US>3</span>。如果你的變數不宣告成“<b style='mso-bidi-font-weight:normal'><span
lang=EN-US>volatile</span></b>”型態，則<span lang=EN-US>A</span>的例子只會執行功能<span
lang=EN-US>1</span>一次，<span lang=EN-US>B</span>的例子則只會執行功能<span lang=EN-US>3</span>，這和程式設計師的本意就違背了，很多驅動程式的初學者都會犯這樣的錯誤。』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『聽起來是蠻神奇的，我從來沒想過這樣的事情，我以後寫驅動程式時會小心的。此外我對<span
lang=EN-US>dev_LED.c</span>我還有一個問題，<span style='display:none;mso-hide:all'>道如何這台機器才能更新</span>我翻了<span
lang=EN-US>CPU</span>的<span lang=EN-US>data sheet</span>，程式中那些數字<span
lang=EN-US>0x300022</span>、<span lang=EN-US>0x300023</span>是代表<span lang=EN-US>CPU</span>內的暫存器<a
style='mso-footnote-id:ftn14' href="#_ftn14" name="_ftnref14" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[14]</span></span><![endif]></span></span></span></a>，設定其中的某個<span
lang=EN-US>bit</span>就能控制<span lang=EN-US>CPU</span>中的某根輸出<span lang=EN-US>PIN</span>，可是我實在看不懂<span
lang=EN-US>sample code</span>中這樣的寫法：<span style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>*(volatile unsigned
char*)0x300022|=0x2 <o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『這樣的寫法確實對初學者有點複雜，首先看<span
lang=EN-US>data sheet</span>裡對暫存器<span lang=EN-US>0x300022</span>的定義，程式的目的就是要將<span
lang=EN-US>P51</span>設為<span lang=EN-US>High</span>。如果把這行程式改寫成下面的形式<span
lang=EN-US>(</span>程式<span lang=EN-US>3-5)</span>，你是不是就可以看懂了呢？』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape
 id="_x0000_i1029" type="#_x0000_t75" style='width:510pt;height:100.5pt'>
 <v:imagedata src="/b2/CH03_02.files/image009.jpg" o:title="03-08-memory mapping暫存器定義實例"/>
</v:shape><![endif]--><![if !vml]><img width=680 height=134
src="/b2/CH03_02.files/image010.jpg" v:shapes="_x0000_i1029"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>圖<span lang=EN-US>3-8</span>：<span
lang=EN-US>memory mapping</span>暫存器定義實例<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span>Function: </span></b><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>drv_LED_on()<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>       </span></span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>開啟<span lang=EN-US>LED<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>void </span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LED_on
(void)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>volatile unsigned char data
;<span style='mso-tab-count:2'>              </span><b style='mso-bidi-font-weight:
normal'>// </b></span><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>儲存暫存器的值</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>volatile unsigned char *
reg ;<span style='mso-tab-count:2'>              </span><b style='mso-bidi-font-weight:
normal'>// </b></span><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>指向暫存器所在位址的指標</span></b><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>reg<span
style='mso-spacerun:yes'>  </span>= (volatile unsigned char*)0x300022 ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>data = *reg ;<span
style='mso-tab-count:5'>                                    </span><b
style='mso-bidi-font-weight:normal'>// </b></span><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>取出<span
lang=EN-US>0x300022</span>暫存器的值</span></b><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>data = data | 0x2 ;<span
style='mso-tab-count:4'>                          </span><b style='mso-bidi-font-weight:
normal'>// </b></span><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>將第二個<span lang=EN-US>bit</span>設為<span
lang=EN-US>1 (data |= 0x2 ;)</span></span></b><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>*reg = data ;<span
style='mso-tab-count:5'>                                    </span><b
style='mso-bidi-font-weight:normal'>// </b></span><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>對<span
lang=EN-US>0x300022</span>暫存器設定新的值</span></b><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif";color:blue'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:27.0pt;mso-char-indent-count:2.25;
line-height:18.0pt;mso-line-height-rule:exactly;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>}<o:p></o:p></span></p>

<p class=a align=center style='text-align:center;line-height:18.0pt;mso-line-height-rule:
exactly'><a name="_Toc163359606"><span style='font-family:"微軟正黑體","sans-serif"'>程式<span
lang=EN-US>3-5</span>：改寫<span lang=EN-US>drv_LED_on()</span></span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『這樣寫我就看懂了，原來利用<span lang=EN-US>C</span>語言的指標就可以操作<span
lang=EN-US>CPU</span>暫存器啊！<span style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『這行命令用組合語言寫反而更簡單明瞭，你有興趣知道嗎？』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『我今天受的驚嚇已經夠多了，我想我只要會一種寫法就好了！<span style='display:none;
mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>韌體老鳥：『你說的沒錯，這真的<b
style='mso-bidi-font-weight:normal'>只需要知道觀念就可以了，當你忘記怎麼寫的時候，再從<span lang=EN-US>sample
code</span>複製出想要的<span lang=EN-US>code</span>來改就可以了</b>。但是寫驅動程式的人還是要稍微看懂組合語言比較好，有時候廠商提供的<span
lang=EN-US>sample code</span>就是用組合語言寫的。話說回來，無論如何你就給個面子，讓我改寫成組合語言，參考一下嘛，只要兩行喔！』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-indent:24.0pt;line-height:18.0pt;mso-line-height-rule:exactly'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>// </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>將<span lang=EN-US>0x300022</span>這個值存到<span
lang=EN-US>CPU</span>內部的一般暫存器中<span lang=EN-US>R0</span>中<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-indent:24.0pt;line-height:18.0pt;mso-line-height-rule:exactly'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>        </span>asm(&quot;xld.w<span
style='mso-spacerun:yes'>   </span>%r0, 0x300022&quot;);<span style='mso-tab-count:
1'>       </span><o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'>            </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-indent:24.0pt;line-height:18.0pt;mso-line-height-rule:exactly'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>// </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>把<span lang=EN-US>R0</span>當做指標，設定<span
lang=EN-US>0x300022</span>暫存器值的<span lang=EN-US>bit 1</span>為<span lang=EN-US>1<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;mso-para-margin-left:2.0gd;
text-indent:24.0pt;line-height:18.0pt;mso-line-height-rule:exactly'><b
style='mso-bidi-font-weight:normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:24.0pt;text-indent:24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
color:blue'>asm(&quot;bset<span style='mso-spacerun:yes'>    </span>[%r0], 0x1&quot;);<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly;mso-layout-grid-align:none;text-autospace:none'><span style='font-family:
"微軟正黑體","sans-serif"'>菜鳥：『<span lang=EN-US>(</span>真是愛現！<span lang=EN-US>)</span><span
style='display:none;mso-hide:all'>道如何這台機器才能更新</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

</div>

<div style='mso-element:footnote-list'><![if !supportFootnotes]><br clear=all>

<hr align=left size=1 width="33%">

<![endif]>

<div style='mso-element:footnote' id=ftn1>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn1' href="#_ftnref1"
name="_ftn1" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>通常開發環境中把可以做出一個執行檔的所有相關檔案稱為一個</span><span
lang=EN-US>project</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，</span><span
lang=EN-US>Visual Studio .Net</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>則稱之為</span><span
lang=EN-US>solution</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。為了與專案管理的</span><span
lang=EN-US>”</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>專案</span><span
lang=EN-US>”</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>一詞有所區分，本書中直接用英文</span><span
lang=EN-US>project</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>表示可產生執行檔的所有檔案集合。</span></p>

</div>

<div style='mso-element:footnote' id=ftn2>

<p class=MsoFootnoteText style='text-align:justify;text-justify:inter-ideograph'><a
style='mso-footnote-id:ftn2' href="#_ftnref2" name="_ftn2" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Times New Roman","serif";
mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;mso-ansi-language:EN-US;
mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[2]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>嵌入式系統的程式和</span><span
lang=EN-US>PC</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>程式不同，因為每個產品的記憶體配置都可能不一樣，所以程式設計師要自己指定程式要在哪個位址執行，這個動作叫做重定址</span><span
lang=EN-US>(relocation)</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>；重定址這個動作是由</span><span
lang=EN-US>linker</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>來做，至於什麼程式區段要定址到哪個位址，則必須由程式設計師自己指定</span><span
lang=EN-US>(</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>只有自己才知道硬體的記憶體配置為何吧！</span><span
lang=EN-US>)</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span></p>

</div>

<div style='mso-element:footnote' id=ftn3>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn3' href="#_ftnref3"
name="_ftn3" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[3]</span></span><![endif]></span></span></span></a><span
lang=EN-US> Linking</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>時除了可以指定執行檔的起始位置外，也可以指定哪一個程式是執行檔的開頭。</span></p>

</div>

<div style='mso-element:footnote' id=ftn4>

<p class=MsoFootnoteText style='text-align:justify;text-justify:inter-ideograph'><a
style='mso-footnote-id:ftn4' href="#_ftnref4" name="_ftn4" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Times New Roman","serif";
mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;mso-ansi-language:EN-US;
mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[4]</span></span><![endif]></span></span></span></a><span
lang=EN-US> PC (Program Counter) – CPU</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>內一定會有的暫存器，不同</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>可能會用不同的名字，例如</span><span
lang=EN-US>IP(Instruction Pointer)</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>；用途是用來記錄下一個指令的位址，當</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>執行完一個指令後，</span><span
lang=EN-US>PC</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>值會自動累加，此外某些指令</span><span
lang=EN-US>(</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>如</span><span
lang=EN-US>JUMP)</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>就是透過改變</span><span
lang=EN-US>PC</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的值來改變</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的執行順序。</span></p>

</div>

<div style='mso-element:footnote' id=ftn5>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn5' href="#_ftnref5"
name="_ftn5" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[5]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>中斷向量表</span><span
lang=EN-US> (Interrupt Vector Table) – </span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>計算機系統透過中斷</span><span
lang=EN-US>(Interrupt)</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>來處理突發事件，例如鍵盤被按下或計時器到時等。通常</span><span
lang=EN-US>CPU(</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>或</span><span
lang=EN-US>CPU+</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>中斷處理器</span><span
lang=EN-US>)</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>可以處理許多中斷來源，所以程式設計師必須指定：當某個中斷發生時要讓</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>去執行哪一個函數，而記錄這些設定的表格就叫做中斷向量表。</span></p>

</div>

<div style='mso-element:footnote' id=ftn6>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn6' href="#_ftnref6"
name="_ftn6" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[6]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>也有一些</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的中斷向量表是以</span><span
lang=EN-US>8 byte</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>為單位的。</span></p>

</div>

<div style='mso-element:footnote' id=ftn7>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn7' href="#_ftnref7"
name="_ftn7" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[7]</span></span><![endif]></span></span></span></a><span
style='font-family:"新細明體","serif";mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>除以</span><span lang=EN-US>0</span><span
style='font-family:"新細明體","serif";mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>是不合法的運算，當然程式設計師是不會故意寫這樣的運算式，但有時後因為程式的</span><span
lang=EN-US>bug</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>或演算法有問題，導致除數是</span><span
lang=EN-US>0</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>時，</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>就會引發一個中斷，程式設計師可以在這個</span><span
lang=EN-US>ISR</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>處理這種不正常的狀況。</span></p>

</div>

<div style='mso-element:footnote' id=ftn8>

<p class=MsoFootnoteText style='text-align:justify;text-justify:inter-ideograph'><a
style='mso-footnote-id:ftn8' href="#_ftnref8" name="_ftn8" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Times New Roman","serif";
mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;mso-ansi-language:EN-US;
mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[8]</span></span><![endif]></span></span></span></a><span
lang=EN-US> Stack Pointer – “</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>呼叫函數時的參數與返回位址</span><span
lang=EN-US>”</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>以及</span><span
lang=EN-US>”</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>函數內的區域變數</span><span
lang=EN-US>”</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>都是儲存在稱為堆疊</span><span
lang=EN-US>(Stack)</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的記憶體區塊中，</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>內一定有一個暫存器用來記錄目前堆疊的底部；用</span><span
lang=EN-US>C</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>語言寫作的程式幾乎不可避免地要用到函數呼叫以及區域變數，所以在</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>啟動後，要盡快設定堆疊指標暫存器，使其指到一塊足夠大的記憶體。在嵌入式系統中，這個動作必須由程式設計師自己做；而且堆疊的使用要很小心，否則很容易發生不可測的錯誤，第</span><span
lang=EN-US>8-2</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>節會對堆疊做更詳細的介紹。</span></p>

</div>

<div style='mso-element:footnote' id=ftn9>

<p class=MsoFootnoteText style='text-align:justify;text-justify:inter-ideograph'><a
style='mso-footnote-id:ftn9' href="#_ftnref9" name="_ftn9" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Times New Roman","serif";
mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;mso-ansi-language:EN-US;
mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[9]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>狀態暫存器</span> <span
lang=EN-US>– </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在大部分的初始化動作還沒完成之前，此時若產生中斷是很麻煩的事情；所以在</span><span
lang=EN-US>boot</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>階段最重要的事就是命令</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>禁止中斷產生，直到初始化動作都做完後才把中斷功能打開。</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的狀態暫存器由很多狀態旗標組成，通常都會包含用以設定</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是否接受中斷的旗標。</span></p>

</div>

<div style='mso-element:footnote' id=ftn10>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn10' href="#_ftnref10"
name="_ftn10" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[10]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>讀者目前只需知道函數和</span><span
lang=EN-US>ISR</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的進入和結束必須做不同的事情即可，</span><span
lang=EN-US>7.6</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>節會對中斷處理程式再作更清楚的解釋。</span></p>

</div>

<div style='mso-element:footnote' id=ftn11>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn11' href="#_ftnref11"
name="_ftn11" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[11]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>一般</span><span
lang=EN-US>compiler</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>都會有類似的關鍵字，名字或語法可能不一樣，但意義與觀念與本節舉的例子都是相同的。</span></p>

</div>

<div style='mso-element:footnote' id=ftn12>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn12' href="#_ftnref12"
name="_ftn12" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[12]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>有些</span><span
lang=EN-US>compiler</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>會提供某些非標準的關鍵字，觀念類似</span><span
lang=EN-US>__interrupt</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，讓程式設計師可以用</span><span
lang=EN-US>C</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>語言的語法去操作</span><span
lang=EN-US>CPU</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的暫存器；基本上筆者不建議在程式中使用太多非標準的關鍵字，這樣會讓程式看起來很不直覺，而且程式設計師往往不知道</span><span
lang=EN-US>compiler</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>到底會為此產生什麼樣的組合語言碼，這種不確定性有時會帶來麻煩。筆者認為，用</span><span
lang=EN-US>inline assembly</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>在</span><span
lang=EN-US>C</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>程式中寫組合語言是比較一目了然的方法，其實組合語言並沒有那麼難看懂的<span
style='display:none;mso-hide:all'>者認為的方法字即可</span></span><span
style='font-family:"新細明體","serif";mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman"'>。</span></p>

</div>

<div style='mso-element:footnote' id=ftn13>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn13' href="#_ftnref13"
name="_ftn13" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[13]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>請參考本書</span><span
lang=EN-US>11-6</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>節。</span></p>

</div>

<div style='mso-element:footnote' id=ftn14>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn14' href="#_ftnref14"
name="_ftn14" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[14]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>這樣的暫存器稱為</span><span
lang=EN-US>memory mapping register</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>；讀者在這裡只需要知道，這種暫存器就像一般的記憶體一樣，每一個暫存器都有自己的位址，在這個位址上填值，就相當於設定這個暫存器；從這個位址取值，就相當於讀取這個暫存器目前的狀態。在實作上，通常用一個指標指到暫存器所在的位址，然後就可以用</span><span
lang=EN-US>C</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的語法操作暫存器了。</span></p>

</div>

</div>

</body>

</html>
