<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="/b2/CH09_04.files/filelist.xml">
<link rel=Edit-Time-Data href="/b2/CH09_04.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>9.4. 實戰篇</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="chmetcnv"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>cebm</o:Author>
  <o:LastAuthor>Win7User</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>6225</o:TotalTime>
  <o:LastPrinted>2007-04-09T10:32:00Z</o:LastPrinted>
  <o:Created>2011-09-28T15:38:00Z</o:Created>
  <o:LastSaved>2011-09-28T15:38:00Z</o:LastSaved>
  <o:Pages>13</o:Pages>
  <o:Words>2437</o:Words>
  <o:Characters>13897</o:Characters>
  <o:Company>xxx</o:Company>
  <o:Lines>115</o:Lines>
  <o:Paragraphs>32</o:Paragraphs>
  <o:CharactersWithSpaces>16302</o:CharactersWithSpaces>
  <o:Version>12.00</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:TargetScreenSize>544x376</o:TargetScreenSize>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
<link rel=themeData href="/b2/CH09_04.files/themedata.thmx">
<link rel=colorSchemeMapping href="/b2/CH09_04.files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-TW</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:HangulWidthLikeWW11/>
   <w:UseNormalStyleForList/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" LatentStyleCount="267">
  <w:LsdException Locked="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="99" Name="Hyperlink"/>
  <w:LsdException Locked="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true"
   Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="99" SemiHidden="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:新細明體;
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-alt:PMingLiU;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611985 1107304683 0 0 159 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:-520092929 1073786111 9 0 415 0;}
@font-face
	{font-family:微軟正黑體;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:136;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:135 680476672 22 0 1048585 0;}
@font-face
	{font-family:"\@微軟正黑體";
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:136;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:135 680476672 22 0 1048585 0;}
@font-face
	{font-family:"\@新細明體";
	panose-1:2 2 5 0 0 0 0 0 0 0;
	mso-font-charset:136;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-1610611969 684719354 22 0 1048577 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-next:正文;
	margin-top:9.0pt;
	margin-right:0cm;
	margin-bottom:9.0pt;
	margin-left:0cm;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:26.0pt;
	font-family:"Arial","sans-serif";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:26.0pt;}
h2
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:24.0pt;
	font-family:"Arial","sans-serif";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;}
h3
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:300%;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:18.0pt;
	font-family:"Arial","sans-serif";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{mso-style-update:auto;
	mso-style-priority:39;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:24.0pt;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:2.0gd;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{mso-style-update:auto;
	mso-style-priority:39;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:48.0pt;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:4.0gd;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{mso-style-noshow:yes;
	mso-style-unhide:no;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	layout-grid-mode:char;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
p.MsoTof, li.MsoTof, div.MsoTof
	{mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-next:正文;
	margin:0cm;
	margin-bottom:.0001pt;
	mso-para-margin-top:0cm;
	mso-para-margin-right:0cm;
	mso-para-margin-bottom:0cm;
	mso-para-margin-left:4.0gd;
	mso-para-margin-bottom:.0001pt;
	text-indent:-10.0pt;
	mso-char-indent-count:-2.0;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
span.MsoFootnoteReference
	{mso-style-noshow:yes;
	mso-style-unhide:no;
	vertical-align:super;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	mso-style-unhide:no;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-unhide:no;
	color:purple;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
p.a, li.a, div.a
	{mso-style-name:圖表;
	mso-style-unhide:no;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:27.0pt;
	mso-char-indent-count:2.25;
	mso-pagination:none;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:新細明體;
	mso-font-kerning:1.0pt;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	mso-fareast-font-family:新細明體;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("/b2/CH09_04.files/header.htm") fs;
	mso-footnote-continuation-separator:url("/b2/CH09_04.files/header.htm") fcs;
	mso-endnote-separator:url("/b2/CH09_04.files/header.htm") es;
	mso-endnote-continuation-separator:url("/b2/CH09_04.files/header.htm") ecs;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:42.55pt 42.55pt 42.55pt 42.55pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:18.0pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:42679284;
	mso-list-type:hybrid;
	mso-list-template-ids:-643404944 -171399146 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:45.0pt;
	mso-level-number-position:left;
	margin-left:45.0pt;
	text-indent:-18.0pt;}
@list l1
	{mso-list-id:97220612;
	mso-list-type:hybrid;
	mso-list-template-ids:-18305394 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:51.0pt;
	mso-level-number-position:left;
	margin-left:51.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l2
	{mso-list-id:109663464;
	mso-list-template-ids:-1137929570;}
@list l2:level1
	{mso-level-start-at:10;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l2:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l2:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l2:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l2:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l2:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l2:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l2:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l2:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l3
	{mso-list-id:349913012;
	mso-list-template-ids:-1556298844;}
@list l3:level1
	{mso-level-start-at:9;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l3:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l3:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l3:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l3:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l3:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l3:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l3:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l3:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l4
	{mso-list-id:504785974;
	mso-list-template-ids:-1137929570;}
@list l4:level1
	{mso-level-start-at:10;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l4:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l4:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l4:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l4:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l4:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l4:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l4:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l4:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l5
	{mso-list-id:661548231;
	mso-list-type:hybrid;
	mso-list-template-ids:-560931996 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:51.0pt;
	mso-level-number-position:left;
	margin-left:51.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l6
	{mso-list-id:816872232;
	mso-list-type:hybrid;
	mso-list-template-ids:590512872 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:51.0pt;
	mso-level-number-position:left;
	margin-left:51.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l7
	{mso-list-id:953708627;
	mso-list-type:hybrid;
	mso-list-template-ids:-753873784 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:51.0pt;
	mso-level-number-position:left;
	margin-left:51.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l7:level2
	{mso-level-number-format:bullet;
	mso-level-text:;
	mso-level-tab-stop:75.0pt;
	mso-level-number-position:left;
	margin-left:75.0pt;
	text-indent:-24.0pt;
	font-family:Wingdings;}
@list l8
	{mso-list-id:1126050324;
	mso-list-template-ids:-1460086014;}
@list l8:level1
	{mso-level-start-at:9;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:40.5pt;
	text-indent:-40.5pt;}
@list l8:level2
	{mso-level-start-at:4;
	mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:54.0pt;
	text-indent:-54.0pt;}
@list l8:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:72.0pt;
	text-indent:-72.0pt;}
@list l8:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:90.0pt;
	text-indent:-90.0pt;}
@list l8:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:108.0pt;
	text-indent:-108.0pt;}
@list l8:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:144.0pt;
	text-indent:-144.0pt;}
@list l8:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:162.0pt;
	text-indent:-162.0pt;}
@list l8:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:180.0pt;
	text-indent:-180.0pt;}
@list l8:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:198.0pt;
	text-indent:-198.0pt;}
@list l9
	{mso-list-id:1281456551;
	mso-list-template-ids:919140302;}
@list l9:level1
	{mso-level-start-at:9;
	mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l9:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l9:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l9:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l9:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l9:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l9:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l9:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l9:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
@list l10
	{mso-list-id:1860465117;
	mso-list-template-ids:67698719;}
@list l10:level1
	{mso-level-tab-stop:21.25pt;
	mso-level-number-position:left;
	margin-left:21.25pt;
	text-indent:-21.25pt;}
@list l10:level2
	{mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.0cm;
	mso-level-number-position:left;
	margin-left:1.0cm;
	text-indent:-1.0cm;}
@list l10:level3
	{mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:35.45pt;
	mso-level-number-position:left;
	margin-left:35.45pt;
	text-indent:-35.45pt;}
@list l10:level4
	{mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:42.55pt;
	mso-level-number-position:left;
	margin-left:42.55pt;
	text-indent:-42.55pt;}
@list l10:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:49.6pt;
	mso-level-number-position:left;
	margin-left:49.6pt;
	text-indent:-49.6pt;}
@list l10:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.0cm;
	mso-level-number-position:left;
	margin-left:2.0cm;
	text-indent:-2.0cm;}
@list l10:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:63.8pt;
	mso-level-number-position:left;
	margin-left:63.8pt;
	text-indent:-63.8pt;}
@list l10:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:70.9pt;
	mso-level-number-position:left;
	margin-left:70.9pt;
	text-indent:-70.9pt;}
@list l10:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:77.95pt;
	mso-level-number-position:left;
	margin-left:77.95pt;
	text-indent:-77.95pt;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-unhide:no;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-TW link=blue vlink=purple style='tab-interval:24.0pt;text-justify-trim:
punctuation'>

<div class=Section1 style='layout-grid:18.0pt'>

<p class=MsoToc2 style='line-height:18.0pt;mso-line-height-rule:exactly;
tab-stops:60.0pt right dotted 509.7pt'><a name="_Toc149018090"></a><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-begin'></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><span
style='mso-spacerun:yes'> </span>TOC \o &quot;1-3&quot; \h \z \u <span
style='mso-element:field-separator'></span></span></span><![endif]--><span
style='mso-bookmark:_Toc149018090'></span><a href="#_Toc304922905"><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";
mso-no-proof:yes'>9.4.</span></span><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";color:windowtext;mso-no-proof:yes;
text-decoration:none;text-underline:none'><span style='mso-tab-count:1'>      </span></span></span><span
style='mso-bookmark:_Toc149018090'><span style='font-family:"微軟正黑體","sans-serif";
mso-no-proof:yes'>實戰篇</span></span><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='color:windowtext;display:none;mso-hide:screen;mso-no-proof:
yes;text-decoration:none;text-underline:none'><span style='mso-tab-count:1 dotted'>... </span></span></span><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-begin'></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'> PAGEREF _Toc304922905 \h <span style='mso-element:field-separator'></span></span></span><![endif]--><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'>1<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900320032003900300035000000</w:data>
</xml><![endif]--></span></span><!--[if supportFields]><span style='mso-bookmark:
_Toc149018090'></span><span style='mso-element:field-end'></span><![endif]--><span
style='mso-bookmark:_Toc149018090'></span></a><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoToc3 style='line-height:18.0pt;mso-line-height-rule:exactly;
tab-stops:right dotted 509.7pt'><span style='mso-bookmark:_Toc149018090'></span><a
href="#_Toc304922906"><span style='mso-bookmark:_Toc149018090'><span
style='font-family:"微軟正黑體","sans-serif";mso-no-proof:yes'>模擬器實作的基本觀念<span
lang=EN-US> - </span>模擬<span lang=EN-US>LCD</span></span></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'><span style='mso-tab-count:1 dotted'>.. </span></span></span><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-begin'></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'> PAGEREF _Toc304922906 \h <span style='mso-element:field-separator'></span></span></span><![endif]--><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'>1<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900320032003900300036000000</w:data>
</xml><![endif]--></span></span><!--[if supportFields]><span style='mso-bookmark:
_Toc149018090'></span><span style='mso-element:field-end'></span><![endif]--><span
style='mso-bookmark:_Toc149018090'></span></a><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoToc3 style='line-height:18.0pt;mso-line-height-rule:exactly;
tab-stops:right dotted 509.7pt'><span style='mso-bookmark:_Toc149018090'></span><a
href="#_Toc304922907"><span style='mso-bookmark:_Toc149018090'><span
style='font-family:"微軟正黑體","sans-serif";mso-no-proof:yes'>模擬器與系統組態</span></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'><span style='mso-tab-count:1 dotted'>... </span></span></span><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-begin'></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'> PAGEREF _Toc304922907 \h <span style='mso-element:field-separator'></span></span></span><![endif]--><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'>7<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900320032003900300037000000</w:data>
</xml><![endif]--></span></span><!--[if supportFields]><span style='mso-bookmark:
_Toc149018090'></span><span style='mso-element:field-end'></span><![endif]--><span
style='mso-bookmark:_Toc149018090'></span></a><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoToc3 style='line-height:18.0pt;mso-line-height-rule:exactly;
tab-stops:right dotted 509.7pt'><span style='mso-bookmark:_Toc149018090'></span><a
href="#_Toc304922908"><span style='mso-bookmark:_Toc149018090'><span
style='font-family:"微軟正黑體","sans-serif";mso-no-proof:yes'>其他功能的模擬</span></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'><span style='mso-tab-count:1 dotted'>... </span></span></span><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-begin'></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'> PAGEREF _Toc304922908 \h <span style='mso-element:field-separator'></span></span></span><![endif]--><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'>8<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900320032003900300038000000</w:data>
</xml><![endif]--></span></span><!--[if supportFields]><span style='mso-bookmark:
_Toc149018090'></span><span style='mso-element:field-end'></span><![endif]--><span
style='mso-bookmark:_Toc149018090'></span></a><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoToc3 style='line-height:18.0pt;mso-line-height-rule:exactly;
tab-stops:right dotted 509.7pt'><span style='mso-bookmark:_Toc149018090'></span><a
href="#_Toc304922909"><span style='mso-bookmark:_Toc149018090'><span
style='font-family:"微軟正黑體","sans-serif";mso-no-proof:yes'>模擬器其他功能<span
lang=EN-US> – logging and profiling</span></span></span><span style='mso-bookmark:
_Toc149018090'><span lang=EN-US style='color:windowtext;display:none;
mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:none'><span
style='mso-tab-count:1 dotted'>.. </span></span></span><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-begin'></span><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'> PAGEREF _Toc304922909 \h <span style='mso-element:field-separator'></span></span></span><![endif]--><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='color:windowtext;
display:none;mso-hide:screen;mso-no-proof:yes;text-decoration:none;text-underline:
none'>11<!--[if gte mso 9]><xml>
 <w:data>08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003300300034003900320032003900300039000000</w:data>
</xml><![endif]--></span></span><!--[if supportFields]><span style='mso-bookmark:
_Toc149018090'></span><span style='mso-element:field-end'></span><![endif]--><span
style='mso-bookmark:_Toc149018090'></span></a><span style='mso-bookmark:_Toc149018090'><span
lang=EN-US style='mso-bidi-font-size:11.0pt;font-family:"Calibri","sans-serif";
mso-bidi-font-family:"Times New Roman";mso-no-proof:yes'><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
style='mso-bookmark:_Toc149018090'></span><!--[if supportFields]><span
style='mso-bookmark:_Toc149018090'></span><span style='mso-element:field-end'></span><![endif]--><span
style='mso-bookmark:_Toc149018090'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></span></p>

<span style='mso-bookmark:_Toc149018090'></span>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h2 style='margin-left:54.0pt;text-indent:-54.0pt;line-height:18.0pt;
mso-line-height-rule:exactly;mso-list:l8 level2 lfo11'><a name="_Toc304922905"></a><a
name="_Toc149018094"><span style='mso-bookmark:_Toc304922905'><![if !supportLists]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:微軟正黑體'><span
style='mso-list:Ignore'>9.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"微軟正黑體","sans-serif"'>實戰篇</span></span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h2>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『我已經了解模擬器對電子產品開發的好處了，你可不可以順便教我一下“模擬”的細節？<span
style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『<span lang=EN-US>OK</span>，最近我要負責系統整合，模擬器有些功能還在擴充中，正需要人手幫忙，我試著講解幾個模擬的例子，然後分配一些還未實現的驅動程式<span
lang=EN-US>API</span>給你做。<span style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『剛剛還說模擬器是整個專案中最先完成的程式，怎麼現在已經要開始系統整合了，居然還有<span
lang=EN-US>API</span>尚未實現？<span style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『這有什麼好吃驚的，系統組的事情這麼多，要建構開發環境，還要實現大部分的系統功能，我哪有人做那麼多事情？所以當然是按照事情的輕重緩急來調整工作順序，模擬器的在初期最重要，所以我們當然會按照設計文件中驅動程式的<span
lang=EN-US>API</span>來實現模擬器的功能；但是隨著驅動程式與應用程式開始實作，難免會有新的功能需求出現，有可能是驅動程式工程師發現當初設計的某些功能難以實現，或者其實硬體功能比設計階段了解的還要強大，所以對<span
lang=EN-US>API</span>有所增刪；此外應用程式工程師也可能發現<span lang=EN-US>API</span>的缺陷，要求底層支援新的功能。凡此種種，一旦通過設計規格修正後，模擬器自然也要跟著對應；其他同仁正等著用這些新增功能，偏偏我們又沒時間做，看來這個拯救地球的重責大任只能交給你了。<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『<span lang=EN-US>PM</span>老大把我當作預備隊，你也把我當成救火隊，可不可以哪天讓我當啦啦隊就好？<span
style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『別囉唆了，這年頭有工作給你作還能學習新的東西，應該偷笑了！<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『每次都這樣霸王硬上弓<span
lang=EN-US>…</span><span style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304922906"><span style='font-family:"微軟正黑體","sans-serif"'>模擬器實作的基本觀念<span
lang=EN-US> - </span>模擬<span lang=EN-US>LCD</span></span></a><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『<span lang=EN-US>LCD</span>的模擬非常直覺，我們就從<span
lang=EN-US>LCD</span>講起，對此你應該有些概念了吧？<span style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『這個我曾偷偷研究了一下，總之就是用<span
lang=EN-US>Windows</span>的<span lang=EN-US>Canvas</span>物件<span lang=EN-US>(</span>或其他繼承自<span
lang=EN-US>Canvas</span>的物件<span lang=EN-US>)</span>來模擬就是了，雖然細節我還沒深入想過，要在<span
lang=EN-US>Canvas</span>上實現這些功能應該不難吧。』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『的確是不難，我們開發系統時有個重點，就是能在<span
lang=EN-US>Windows</span>上作的就儘量先在<span lang=EN-US>Windows</span>上作。例如等下會提到的基本繪圖功能，雖然<span
lang=EN-US>Canvas</span>本身就有畫點、畫線<span lang=EN-US>…</span>等功能，但我們實際在模擬<span
lang=EN-US>LCD</span>功能時，會把在<span lang=EN-US>Canvas</span>上繪圖的方法規劃為類似<span
lang=EN-US>LCD driver</span>對<span lang=EN-US>video RAM</span>的操作，則繪圖功能將變成和實體機器一樣，只要計算後再去改變記憶體<span
lang=EN-US>(</span>稱為<span lang=EN-US>video RAM</span>或<span lang=EN-US>frame
buffer)</span>內容即可；所以模擬<span lang=EN-US>LCD</span>相關的程式就可以先在<span lang=EN-US>Windows</span>上除錯，即實體機器與模擬器可以使用同一套程式，相關細等一下就會談到。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>我們系統中與<span lang=EN-US>LCD</span>有關的<span
lang=EN-US>API</span>如下：<span style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo8;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>LCD</span><span
style='font-family:"微軟正黑體","sans-serif"'>初始化：在機器上必須初始化<span lang=EN-US>LCD
controller</span>並設置相關電源，<span lang=EN-US>LCD</span>才可以順利運作；在模擬器上就比較簡單了，只要把<span
lang=EN-US>Canvas</span>物件的長、寬以及顏色等級設定好就可以了。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdInit – </span><span
style='font-family:"微軟正黑體","sans-serif"'>初始化<span lang=EN-US>LCD</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level1 lfo8;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>LCD</span><span
style='font-family:"微軟正黑體","sans-serif"'>屬性<span lang=EN-US>API</span>：從組態檔中可以得到<span
lang=EN-US>LCD</span>的基本屬性。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdWidth – </span><span
style='font-family:"微軟正黑體","sans-serif"'>傳回<span lang=EN-US>LCD</span>的寬度<span
lang=EN-US>(</span>單位：<span lang=EN-US>pixel)</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drvLcdHeight – </span><span
style='font-family:"微軟正黑體","sans-serif"'>傳回<span lang=EN-US>LCD</span>的高度<span
lang=EN-US>(</span>單位：<span lang=EN-US>pixel)</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdPixelBits – </span><span
style='font-family:"微軟正黑體","sans-serif"'>獲得<span lang=EN-US>LCD</span>的顯示模式，每<span
lang=EN-US>pixel</span>所需<span lang=EN-US>bit</span>數，如<span lang=EN-US>4</span>色灰階就是每<span
lang=EN-US>2</span>個<span lang=EN-US>bit</span>表示一個<span lang=EN-US>pixel</span>的顏色。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo8;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>LCD</span><span
style='font-family:"微軟正黑體","sans-serif"'>背光<span lang=EN-US>API</span>：有的<span
lang=EN-US>LCD</span>模組包含背光功能，在機器上通常必須控制某根<span lang=EN-US>output PIN</span>來控制背光功能的開關；在模擬器上可以實現背光功能模擬的方法很多，例如模擬<span
lang=EN-US>LCD</span>的<span lang=EN-US>Canvas</span>其基本色調是黑白，當開啟背光後可以把<span
lang=EN-US>Canvas</span>的基本色調調為綠色。在<span lang=EN-US>Windows</span>上實作相當簡單，應該只要調整<span
lang=EN-US>Canvas</span>的調色盤就可以了。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdBackLightOn – </span><span
style='font-family:"微軟正黑體","sans-serif"'>打開<span lang=EN-US>/</span>關閉<span
lang=EN-US>LCD</span>背光。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdGetBackLightStatus –
</span><span style='font-family:"微軟正黑體","sans-serif"'>傳回目前<span lang=EN-US>LCD</span>開關的狀態。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo8;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>LCD</span><span
style='font-family:"微軟正黑體","sans-serif"'>明暗度<span lang=EN-US>API</span>：有種<span
lang=EN-US>IC</span>在接收到特殊命令時可以輸出指定的電壓值，通常<span lang=EN-US>LCD</span>的明暗度就是透過這種<span
lang=EN-US>IC</span>來控制，不同的輸入電壓可以讓<span lang=EN-US>LCD</span>產生不同的明暗度效果。在<span
lang=EN-US>Windows</span>上要模擬這種功能方法很多，最簡單的應該就是在<span lang=EN-US>Canvas</span>的調色盤上做文章。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdSetContrast – </span><span
style='font-family:"微軟正黑體","sans-serif"'>設定<span lang=EN-US>LCD</span>明暗度等級。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdGetContrast – </span><span
style='font-family:"微軟正黑體","sans-serif"'>取得目前<span lang=EN-US>LCD</span>明暗度的等級。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo8;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>LCD frame buffer API</span><span
style='font-family:"微軟正黑體","sans-serif"'>：<span lang=EN-US>LCD controller</span>要在<span
lang=EN-US>LCD</span>上顯示什麼內容是由<span lang=EN-US>video RAM</span>的內容來決定，而<span
lang=EN-US>LCD controller</span>的工作就是根據<span lang=EN-US>video RAM</span>的內容定時刷新；換個方向來看，<span
lang=EN-US>LCD</span>驅動程式只要改變<span lang=EN-US>videoRAM</span>的內容，在下次<span
lang=EN-US>LCD</span>刷新時，就可以看到<span lang=EN-US>LCD</span>的畫面改變了。有時候我們也把<span
lang=EN-US>video RAM</span>稱為<span lang=EN-US>frame buffer</span>，舉例來說，如果<span
lang=EN-US>LCD controller</span>設定為控制<span lang=EN-US>4</span>色灰階的<span
lang=EN-US>LCD</span>，則一個點由兩個<span lang=EN-US>bit</span>表示，或說一個<span
lang=EN-US>byte</span>可以表示四個點，如下圖。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:391.5pt;
 height:240pt'>
 <v:imagedata src="/b2/CH09_04.files/image001.jpg" o:title="09-04-四色灰階frame buffer圖示"/>
</v:shape><![endif]--><![if !vml]><img width=522 height=320
src="/b2/CH09_04.files/image002.jpg" v:shapes="_x0000_i1025"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;text-indent:0cm;mso-char-indent-count:
0;line-height:18.0pt;mso-line-height-rule:exactly'><a name="_Toc163738700"><span
style='font-family:"微軟正黑體","sans-serif"'>圖<span lang=EN-US>9-4</span>：四色灰階<span
lang=EN-US>frame buffer</span>圖示</span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;mso-para-margin-left:3.75gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;mso-para-margin-left:3.75gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span style='font-family:"微軟正黑體","sans-serif"'>通常我們會準備兩塊<span
lang=EN-US>frame buffer</span>，一塊是前景<span lang=EN-US>(foreground)</span>，一塊是背景<span
lang=EN-US>(background)</span>；在做圖形計算時，會先保持前景與背景同步，先將結果畫在背景<span lang=EN-US>(</span>實際上是將計算所得的結果寫入背景<span
lang=EN-US>frame buffer</span>中<span lang=EN-US>)</span>，等所有圖形畫完後，再一次把背景的內容覆蓋到前景。這種作法的好處是使用者不會看到一張圖慢慢的畫出來，而是稍等一陣子後，整張圖一下子全部顯現，顯然後者的使用者感覺較佳。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:45.0pt;mso-para-margin-left:3.75gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;mso-para-margin-left:3.75gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>通常我們在模擬<span
lang=EN-US>LCD</span>時都會保留<span lang=EN-US>frame buffer</span>的操作畫面方式，所以機器與模擬器上之基本繪圖函式的程式碼幾乎是一樣的，總之就是對前<span
lang=EN-US>/</span>背景<span lang=EN-US>frame buffer</span>進行操作。這麼做的好處是可以先在<span
lang=EN-US>PC</span>上調整與測試<span lang=EN-US>frame buffer</span>的演算法，屆時<span
lang=EN-US>LCD</span>驅動程式就可以使用這些演算法。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:45.0pt;mso-para-margin-left:3.75gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;mso-para-margin-left:3.75gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>話說回來，通常模擬器會先配置兩塊和實體機器<span
lang=EN-US>video RAM</span>相同大小的記憶體，並以此當作前、背景的<span lang=EN-US>video RAM</span>；雖然<span
lang=EN-US>Windows</span>的<span lang=EN-US>Canvas</span>物件也會有類似<span
lang=EN-US>frame buffer</span>的屬性，但格式可能和實體機器的<span lang=EN-US>video RAM</span>不一樣。所以較好的作法是模擬<span
lang=EN-US>LCD controller</span>的工作，<span lang=EN-US>graphics library</span>每做完<span
lang=EN-US>frame buffer</span>的操作後，就把<span lang=EN-US>frame buffer</span>的內容反映到<span
lang=EN-US>Canvas</span>物件的畫面上，使<span lang=EN-US>Canvas</span>可以按照前景<span
lang=EN-US>frame buffer</span>的內容來顯示。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_SetLcdDrawType – </span><span
style='font-family:"微軟正黑體","sans-serif"'>設定<span lang=EN-US>graphics library</span>會畫到前景還是背景，基本上就是一個全域變數而已。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_GetLcdDrawType – </span><span
style='font-family:"微軟正黑體","sans-serif"'>取得目前<span lang=EN-US>graphics library</span>會畫到前景還是背景的系統屬性。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdSetForegroundVRamBase
– </span><span style='font-family:"微軟正黑體","sans-serif"'>設定前景<span lang=EN-US>frame
buffer</span>的起始位址。在機器上，<span lang=EN-US>LCD controller</span>可能會規定<span
lang=EN-US>video RAM</span>必須在特定的位址，或者<span lang=EN-US>video RAM</span>的位址必須是某個值的倍數<span
lang=EN-US>(</span>例如<span lang=EN-US>16K</span>或<span lang=EN-US>128K)</span>；在<span
lang=EN-US>Windows</span>上這個特定位址可能是無效的，例如下列程式在實體機器上是<span lang=EN-US>OK</span>的，但在<span
lang=EN-US>Windows</span>上就會有問題：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>假設<span lang=EN-US>LCD controller</span>規定的<span lang=EN-US>VRAM</span>位址為<span
lang=EN-US>0x43000<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>#define
VRAM_FOREGROUND_BASE<span style='mso-spacerun:yes'>  </span>(0x43000)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LcdSetForegroundVRamBase(VRAM_FOREGROUND_BASE)
;<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>比較好的方式為：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>假設系統是四色灰階的<span lang=EN-US>LCD, </span>兩個<span lang=EN-US>bit</span>代表一個點<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// i.e. </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>一個<span lang=EN-US>byte</span>代表四個點<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// LCD</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>解析度為<span lang=EN-US>160x160<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>#define
VRAM_SIZE (160*160/4)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>#ifdef
SYS_CONFIG_SIMULATOR<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>// </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>模擬器會編譯這部份的程式<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>#define VRAM_FOREGROUND_BASE <span
style='mso-spacerun:yes'> </span>(0x43000)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>#else<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>// </span></b><b style='mso-bidi-font-weight:normal'><span
style='font-family:"微軟正黑體","sans-serif";color:blue'>實體機器會編譯這部份的程式<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>unsigned char
foreground_frame_buffer[VRAM_SIZE] ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>#define VRAM_FOREGROUND_BASE<span
style='mso-spacerun:yes'>  </span>(foreground_frame_buffer)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>#endif<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LcdSetForegroundVRamBase(VRAM_FOREGROUND_BASE)
;<span style='mso-tab-count:1'>    </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdGetForegroundVRamBase
– </span><span style='font-family:"微軟正黑體","sans-serif"'>取得目前前景<span lang=EN-US>frame
buffer</span>的起始位址。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdSetBackgroudVRamBase
– </span><span style='font-family:"微軟正黑體","sans-serif"'>設定背景<span lang=EN-US>frame
buffer</span>的起始位址。通常我們會把背景的<span lang=EN-US>frame buffer</span>定義為一個<span
lang=EN-US>array</span>，模擬器與實體機器上的程式應該可以完全相同。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>假設系統是四色灰階的<span lang=EN-US>LCD, </span>兩個<span lang=EN-US>bit</span>代表一個點<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>// i.e. </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-family:"微軟正黑體","sans-serif";
color:blue'>一個<span lang=EN-US>byte</span>代表四個點<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>#define
VRAM_SIZE (160*160/4)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>unsigned
char background_frame_buffer[VRAM_SIZE] ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'>drv_LcdSetForegroundVRamBase(background_frame_buffer)
;<span style='mso-tab-count:1'>        </span><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdGetBackgroudVRamBase
– </span><span style='font-family:"微軟正黑體","sans-serif"'>取得目前背景<span lang=EN-US>frame
buffer</span>的起始位址。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdUpdate – </span><span
style='font-family:"微軟正黑體","sans-serif"'>使前景與背景同步，螢幕應該會立即顯示背景<span lang=EN-US>frame
buffer</span>的內容。最簡單的方法就是將背景<span lang=EN-US>frame buffer</span>的記憶體內容逐個<span
lang=EN-US>byte</span>複製到前景的<span lang=EN-US>frame buffer</span>中，在機器與模擬器上都可以這麼做。通常在實體機器上的<span
lang=EN-US>LCD controller</span>會提供快速切換<span lang=EN-US>video RAM</span>位址的硬體功能，所以在機器上只要把原本背景<span
lang=EN-US>frame buffer</span>的位址設定為<span lang=EN-US>LCD controller</span>新的<span
lang=EN-US>video RAM</span>位址，則下次<span lang=EN-US>LCD controller</span>做螢幕刷新時，就會將原本背景的內容顯示在螢幕上，這個方法只要對<span
lang=EN-US>LCD controller</span>下一個簡單的命令，效能當然比<span lang=EN-US>memory copy</span>好得多。結論是，模擬器上實現<span
lang=EN-US>drv_LcdUpdate()</span>的方法可能會與實體機器上不同。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_LcdUpdateArea – </span><span
style='font-family:"微軟正黑體","sans-serif"'>好的<span lang=EN-US>graphics library</span>會紀錄上次前<span
lang=EN-US>/</span>背景同步之後背景被修改的範圍，則下次要做前<span lang=EN-US>/</span>背景同步就不用整個<span
lang=EN-US>frame buffer</span>複製，只要同步有被修該的部份即可。這個函數在模擬器與實體機器上的實現方式應該是一致的，簡單的說，就是<span
lang=EN-US>memory copy</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level1 lfo8;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>LCD Graphics Library API</span><span
style='font-family:"微軟正黑體","sans-serif"'>：所謂的<span lang=EN-US>graphic library</span>就是諸如畫點、畫線、畫矩形、<span
lang=EN-US>show</span>字<span lang=EN-US>…</span>等畫圖函數。雖然<span lang=EN-US>Windows</span>已然提供<span
lang=EN-US>API</span>可以在<span lang=EN-US>Canvas</span>物件上做這些動作，但在實務上，無論模擬器或實體機器，我們會用相同的演算法，亦即運算後直接寫入<span
lang=EN-US>frame buffer</span>，此來我們可以先在<span lang=EN-US>Windows</span>上驗證演算法的正確性。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawPixel – </span><span
style='font-family:"微軟正黑體","sans-serif"'>畫點。根據點的座標，算出其在<span lang=EN-US>frame
buffer</span>的位址，將代表顏色的值寫入這個位址即可；要注意的是，<span lang=EN-US>graphic library</span>會廣泛用到<span
lang=EN-US>bit operation</span>，例如依據座標算出的位址是位址<span lang=EN-US>0x1234</span>的第<span
lang=EN-US>0</span>與第<span lang=EN-US>1</span>個<span lang=EN-US>bit(</span>假設系統是四色灰階的<span
lang=EN-US>LCD, </span>兩個<span lang=EN-US>bit</span>代表一個點<span lang=EN-US>)</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawVLine – </span><span
style='font-family:"微軟正黑體","sans-serif"'>畫直線沒有比較快的方法，就是透過呼叫多次<span lang=EN-US>drv_DrawPixel()</span>來完成<span
lang=EN-US>(X</span>座標相同，<span lang=EN-US>Y</span>座標累加<span lang=EN-US>)</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawHLine – </span><span
style='font-family:"微軟正黑體","sans-serif"'>橫線的每一個點的記憶體位址是連續的，所以畫橫線時可以不用一個點一個點畫，可以先計算出起始點與結束點是第幾個<span
lang=EN-US>byte</span>的第幾個<span lang=EN-US>bit</span>，其中的如果包含完整的<span
lang=EN-US>byte</span>，就可以直接對整個<span lang=EN-US>byte</span>給值；假設系統是兩個<span
lang=EN-US>bit</span>代表一個點，可以想像成原本要分別對四個點著色，現在只需要一個動作就可以對四點著色，速度自然快得多。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawLine – </span><span
style='font-family:"微軟正黑體","sans-serif"'>基本的作法是由起始點與結束點算出斜率，然後利用斜率逐一算出軌跡上的各個點，這種做法簡單直覺，但會用到大量的乘法與除法，效能相當差。我們很容易可以找到效率極佳的斜線演算法，這些演算法已經被證明是有效的，做產品的人只要將其設法移植到自己的系統即可，不需要花時間去研究演算法的原理<a
style='mso-footnote-id:ftn1' href="#_ftn1" name="_ftnref1" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></span></a>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawRect – </span><span
style='font-family:"微軟正黑體","sans-serif"'>矩形分為實心與空心兩種，前者就畫多條橫線<span lang=EN-US>(Y</span>座標累加<span
lang=EN-US>)</span>即可，後者則是由兩條直線與兩條橫線構成；在模擬器與實體機器上都是一樣的。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_GetImage – </span><span
style='font-family:"微軟正黑體","sans-serif"'>取得某個矩形區域對應之<span lang=EN-US>frame
buffer</span>的記憶體內容，並將其儲存為特定的格式<span lang=EN-US>(</span>例如記憶體內容之前加上長、寬、顏色數等資訊。<span
lang=EN-US>)<o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_PutImage – </span><span
style='font-family:"微軟正黑體","sans-serif"'>將<span lang=EN-US>drv_GetImage()</span>取得之螢幕矩形區域，貼到螢幕的另一個位置，這組函數在做動畫或<span
lang=EN-US>show</span>字的功能時很有用，但其基本上就是<span lang=EN-US>frame buffer</span>的操作而已。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-indent:-24.0pt;line-height:
18.0pt;mso-line-height-rule:exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_ClearScreen – </span><span
style='font-family:"微軟正黑體","sans-serif"'>清螢幕，將整個<span lang=EN-US>frame buffer</span>的內容都設為特定顏色<span
lang=EN-US>(</span>白色或黑色<span lang=EN-US>…)</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawChar – </span><span
style='font-family:"微軟正黑體","sans-serif"'>基本顯示英文字母的功能；底層提供的<span lang=EN-US>show</span>字功能通常只是為了除錯用，有時後顯示一些訊息在螢幕上是最簡單的除錯方法，可以知道程式的運行結果等等。其實<span
lang=EN-US>show</span>字功能就是透過<span lang=EN-US>drv_PutImage()</span>來實現的，工程師必須事先把字型的<span
lang=EN-US>bitmap</span>轉換為<span lang=EN-US>drv_PutImage()</span>可接受的格式，通常是儲存成<span
lang=EN-US>array</span>的格式，如下圖：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape
 id="_x0000_i1026" type="#_x0000_t75" style='width:462.75pt;height:255pt'>
 <v:imagedata src="/b2/CH09_04.files/image003.jpg" o:title="09-05-font bitmap圖示"/>
</v:shape><![endif]--><![if !vml]><img width=617 height=340
src="/b2/CH09_04.files/image004.jpg" v:shapes="_x0000_i1026"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;text-indent:0cm;mso-char-indent-count:
0;line-height:18.0pt;mso-line-height-rule:exactly'><a name="_Toc163738701"><span
style='font-family:"微軟正黑體","sans-serif"'>圖<span lang=EN-US>9-5</span>：<span
lang=EN-US>font bitmap</span>圖示</span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>為了簡單說明，假設<span
lang=EN-US>LCD</span>只有黑白兩色，亦即一個<span lang=EN-US>bit</span>代表一個點；首先我們把字型畫在如上圖的方格中，每一個方格代表一個<span
lang=EN-US>bit</span>，填滿代表<span lang=EN-US>1</span>，反之為<span lang=EN-US>0</span>。可以看出這個字的寬度是<span
lang=EN-US>24</span>點，也就是<span lang=EN-US>3</span>個<span lang=EN-US>byte</span>，高度也是<span
lang=EN-US>24</span>點，所以可以用<span lang=EN-US>3 x 24 = 72</span>個<span
lang=EN-US>byte</span>的陣列來表示這個字型，上例這個字可以定義為：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>unsigned char
font_bitmap[(24/8)*24] =<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>0x00, 0x06, 0x00, // line 0<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>0x60, 0x06, 0x00, // line 1<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>0x30, 0x<st1:chmetcnv UnitName="F" SourceValue="0"
HasSpace="False" Negative="False" NumberType="1" TCSC="0" w:st="on">0F</st1:chmetcnv>,
0x00, // line 2<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>0x18, 0x0D, 0x80, // line 3<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>0x18, 0x<st1:chmetcnv UnitName="C" SourceValue="0"
HasSpace="False" Negative="False" NumberType="1" TCSC="0" w:st="on">0C</st1:chmetcnv>,
0x00, // line 22<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>        </span>0x00, 0x<st1:chmetcnv UnitName="C" SourceValue="0"
HasSpace="False" Negative="False" NumberType="1" TCSC="0" w:st="on">0C</st1:chmetcnv>,
0x00, // line 23<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:72.0pt;mso-para-margin-left:6.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>} ;<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:75.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l7 level2 lfo8;tab-stops:list 75.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>n<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'>drv_DrawString – show</span><span
style='font-family:"微軟正黑體","sans-serif"'>字串就是由呼叫多次<span lang=EN-US>drv_DrawChar()</span>來完成；如果要做到像<span
lang=EN-US>printf()</span>這樣可以格式化輸出的功能可以透過與機器無關<a style='mso-footnote-id:ftn2'
href="#_ftn2" name="_ftnref2" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[2]</span></span><![endif]></span></span></span></a>的<span lang=EN-US>ANSI
C</span>函數 <span lang=EN-US>– sprintf()</span>，如下例：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>#include &lt;stdio.h&gt;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>void my_printf(void)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>int a = 10 ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>char b = 'a' ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>char c[] = &quot;this is my string&quot; ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>int d = 0xABCD ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>char buffer[100] ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// sprintf()</span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>會將格式化後的字串“印”到另一個字串去<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>sprintf(buffer,&quot;output string: a=%d b=%c
c=%s d=%X&quot;,a,b,c,d) ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>drv_DrawString(buffer) ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:60.0pt;mso-para-margin-left:5.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304922907"><span style='font-family:"微軟正黑體","sans-serif"'>模擬器與系統組態</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『我突然想到我們系統中有個<span
lang=EN-US>sys_config.h</span>，其中定義了許多系統組態，其中包含了<span lang=EN-US>LCD</span>的寬度、高度、色階<span
lang=EN-US>…</span>等，我們在設計模擬器時應該也會用到這些組態吧？<span style='display:none;mso-hide:
all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『雖然不同電子產品的開發案可能會採用不同的硬體，但研發團隊的發展策略還是希望持續累積研發資產，亦即盡可能地重複使用已經過驗證的程式碼，這就是系統組態存在的原因<span
lang=EN-US> - </span><b style='mso-bidi-font-weight:normal'>使用同一套程式碼就可以<span
lang=EN-US>build</span>出可執行於不同平台的執行檔</b>。執行於不同硬體平台的系統，它們的程式碼都能夠重複使用了，模擬器程式碼可重複使用程度當然更高；因為不論產品硬體規格為何，其模擬器勢必執行於<span
lang=EN-US>Windows</span>或<span lang=EN-US>Linux</span>上<a style='mso-footnote-id:
ftn3' href="#_ftn3" name="_ftnref3" title=""><span class=MsoFootnoteReference><span
lang=EN-US><span style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:12.0pt;font-family:
"微軟正黑體","sans-serif";mso-bidi-font-family:"Times New Roman";mso-font-kerning:
1.0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:
AR-SA'>[3]</span></span><![endif]></span></span></span></a>，開發環境與“硬體”都不變，所以只要善用系統組態的觀念與技巧，模擬器的程式絕對可以重複使用在其他的產品開發案上。<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『你的意思是說模擬器和實體機器的程式共用一個<span
lang=EN-US>sys_config.h</span>嗎？<span style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『我個人是比較喜歡這樣的架構啦，但我看過其他人有不同的作法，請看下圖：<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape id="_x0000_i1027"
 type="#_x0000_t75" style='width:471.75pt;height:313.5pt'>
 <v:imagedata src="/b2/CH09_04.files/image005.jpg" o:title="09-06-獨立的模擬器架構"/>
</v:shape><![endif]--><![if !vml]><img width=629 height=418
src="/b2/CH09_04.files/image006.jpg" v:shapes="_x0000_i1027"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;text-indent:0cm;mso-char-indent-count:
0;line-height:18.0pt;mso-line-height-rule:exactly'><a name="_Toc163738702"><span
style='font-family:"微軟正黑體","sans-serif"'>圖<span lang=EN-US>9-6</span>：獨立的模擬器架構</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『這種架構中模擬器是一個獨立的執行檔<span
lang=EN-US>(</span>假設稱為<span lang=EN-US>simulator.exe)</span>，不管是什麼類型的產品都可以支援；在啟動時會先去讀一個組態檔<span
lang=EN-US>(</span>假設是<span lang=EN-US>sys_config.ini)</span>，理面描述了目前模擬產品的特性，例如記憶體大小配置、<span
lang=EN-US>LCD</span>的解析度、顏色階度、是否支援<span lang=EN-US>touch panel</span>、有多少<span
lang=EN-US>key</span>及其位置關係等等；這個<span lang=EN-US>sys_config.ini</span>必須由系統工程師編寫，有了這個組態檔，模擬器就可以表現出相應的行為。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>至於我們的程式會和另一套函式庫或<span
lang=EN-US>DLL</span>連結，稱為<span lang=EN-US>simulator-library</span>；<span
lang=EN-US>simulator-library</span>會負責和<span lang=EN-US>simulator.exe</span>溝通，一旦連結建立以後，當我們的程式呼叫驅動程式<span
lang=EN-US>API</span>時，最後會<span lang=EN-US>call</span>到<span lang=EN-US>simulator-library</span>中的相關函數，它會對<span
lang=EN-US>simulator.exe</span>下命令，當<span lang=EN-US>simulator.exe</span>接到命令後就會執行相應的動作；例如應用程式呼叫了<span
lang=EN-US>drv_DrawPixel()</span>，真正的動作是<span lang=EN-US>simulator-library</span>送出命令給<span
lang=EN-US>simulator.exe</span>，而<span lang=EN-US>simulator.exe</span>會在視窗上畫出一個點，此外<span
lang=EN-US>simulator.exe</span>會將傳回值送給<span lang=EN-US>simulator-library</span>，<span
lang=EN-US>simulator-library</span>再往上傳回應用程式。<span style='display:none;
mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『你說的這是輸出的<span
lang=EN-US>API</span>，輸入事件的模擬是不是由<span lang=EN-US>simulator.exe</span>主動送給<span
lang=EN-US>simulator-library</span>，<span lang=EN-US>simulator-library</span>在處理、過濾過後，再把事件往上層送就可以了？<span
style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『沒錯，這在上面那張圖可以很清楚的看出來。其實這個架構只是把模擬器分成<span
lang=EN-US>simulator.exe</span>與<span lang=EN-US>simulator-library</span>兩部份而已，和我們之前討論的運作原理都是一樣的。而這個方法的好處是更具彈性、更加的模組化，模擬器本身可以在最小幅度的修改下，就讓下個產品開發案使用。<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304922908"><span style='font-family:"微軟正黑體","sans-serif"'>其他功能的模擬</span></a><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『接下來我們很快的把其他功能的模擬講過一遍，如果你會用如<span
lang=EN-US>Visual Studio</span>或<span lang=EN-US>Borland C++ builder</span>這類開發工具寫作<span
lang=EN-US>Windows</span>圖形化介面程式的話，你會發現這些所謂“模擬”的功能，真的相當簡單直覺：<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l1 level1 lfo10;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>鍵<span lang=EN-US>(</span>盤<span
lang=EN-US>) – </span>用一個<span lang=EN-US>button</span>模擬一個鍵，請見下圖；當<span
lang=EN-US>button</span>被按下<span lang=EN-US>(key-down)</span>或放開<span
lang=EN-US>(key-release)</span>時模擬<span lang=EN-US>key ISR</span>被觸發時該做的事情，我相信應該有很多人提醒過你，千萬不要在<span
lang=EN-US>ISR</span>中做太多事情，所以<span lang=EN-US>key</span>的模擬基本上就是判斷是哪一個<span
lang=EN-US>key</span>，是被按下還是放開，然後將這個事件往上傳遞即可，可能是透過<span lang=EN-US>event</span>的機制、或者是<span
lang=EN-US>message queue</span>，視系統架構而定。要注意的是：真正處理<span lang=EN-US>key</span>事件的程式是與硬體無關的，亦即可以直接在<span
lang=EN-US>PC</span>上開發。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:18.0pt;
mso-line-height-rule:exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><!--[if gte vml 1]><v:shape
 id="_x0000_i1028" type="#_x0000_t75" style='width:426.75pt;height:240pt'>
 <v:imagedata src="/b2/CH09_04.files/image007.jpg" o:title="09-07-模擬器上用button模擬鍵盤"/>
</v:shape><![endif]--><![if !vml]><img width=569 height=320
src="/b2/CH09_04.files/image008.jpg" v:shapes="_x0000_i1028"><![endif]><o:p></o:p></span></p>

<p class=a align=center style='text-align:center;text-indent:0cm;mso-char-indent-count:
0;line-height:18.0pt;mso-line-height-rule:exactly'><a name="_Toc163738703"><span
style='font-family:"微軟正黑體","sans-serif"'>圖<span lang=EN-US>9-7</span>：模擬器上用<span
lang=EN-US>button</span>模擬鍵盤</span></a><span lang=EN-US style='font-family:
"微軟正黑體","sans-serif"'><o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l1 level1 lfo10;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>觸控式螢幕 <span lang=EN-US>– touch panel</span>的操作也是透過中斷觸發，當使用者觸壓<span
lang=EN-US>touch panel</span>時會產生中斷，<span lang=EN-US>touch panel ISR</span>要判斷兩件事情：第一，目前被壓下的座標<a
style='mso-footnote-id:ftn4' href="#_ftn4" name="_ftnref4" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:12.0pt;font-family:"微軟正黑體","sans-serif";mso-bidi-font-family:
"Times New Roman";mso-font-kerning:1.0pt;mso-ansi-language:EN-US;mso-fareast-language:
ZH-TW;mso-bidi-language:AR-SA'>[4]</span></span><![endif]></span></span></span></a>，第二，事件的型態是<span
lang=EN-US>pen-down</span>、<span lang=EN-US>pen-move</span>還是<span lang=EN-US>pen-up</span>，然後和<span
lang=EN-US>key ISR</span>一樣，將座標與事件類型往上送。我們用<span lang=EN-US>Canvas</span>或<span
lang=EN-US>image</span>物件模擬<span lang=EN-US>LCD</span>，當<span lang=EN-US>mouse</span>游標在這些物件上動作時，它們會收到諸如<span
lang=EN-US>OnMouseDown</span>、<span lang=EN-US><span style='mso-tab-count:1'>       </span>OnMouseMove</span>、<span
lang=EN-US>OnMouseUp</span>這些事件以及座標，正好可以用來模擬<span lang=EN-US>pen-down</span>、<span
lang=EN-US>pen-move</span>與<span lang=EN-US>pen-up</span>事件。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l1 level1 lfo10;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>記憶體緩衝區 <span lang=EN-US>– </span>如果實體機器中保留一塊特定起始位址與<span
lang=EN-US>size</span>的記憶體當作程式的<span lang=EN-US>buffer</span>，在實體機器上可以直接使用位址來操作，但在<span
lang=EN-US>Windows</span>上這個顯然行不通；比較直覺的方法是用一個相同大小的全域陣列來模擬這個記憶體緩衝區，然後透過指標間接來存取，程式如下：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>#define GLOBAL_BUFFER_SIZE<span style='mso-spacerun:yes'> 
</span>(64*1024)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'>// </span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:11.0pt;font-family:
"微軟正黑體","sans-serif";color:blue'>不管模擬器或實體機器都透過這個指標來存取這個<span lang=EN-US>buffer<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>unsigned char * global_buffer_pointer = NULL ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span>#ifdef RUN_ON_SIMULATOR<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>這段<span lang=EN-US>code</span>只有要執行於模擬器上時才會被編譯<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>unsigned char
global_buffer[GLOBAL_BUFFER_SIZE] ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>global_buffer_pointer
= global_buffer ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>#else<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>這段<span lang=EN-US>code</span>只有要執行於實體機器上時才會被編譯<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>#define<span
style='mso-spacerun:yes'>  </span>GLOBAL_BUFFER_ ADDRESS<span
style='mso-spacerun:yes'>  </span>0xC00000<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>global_buffer_pointer
= (unsigned char *)GLOBAL_BUFFER_ ADDRESS ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>#endif<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l1 level1 lfo10;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>檔案系統 <span lang=EN-US>–</span>在實體機器上檔案系統是儲存在<span
lang=EN-US>ROM</span>或<span lang=EN-US>Flash</span>中，可能有自己的檔案系統表格，而系統也會提供諸如<span
lang=EN-US>open</span>、<span lang=EN-US>read</span>、<span lang=EN-US>write</span>、<span
lang=EN-US>close</span>等函數讓其他程式可以操作檔案。在<span lang=EN-US>Windows</span>上有很完善的檔案系統，要在模擬器上模擬檔案系統不是大問題，問題是要模擬到哪一個層次？
第一個層次是用一個檔案模擬<span lang=EN-US>ROM</span>，該檔案的內容就和實體機器上的<span lang=EN-US>ROM</span>一模一樣，所以模擬器和實體機器上檔案系統的程式除了“取得<span
lang=EN-US>ROM</span>裡的資料”方式不同外，其餘演算法應該完全相同，這個方法的好處是可以先在<span lang=EN-US>PC</span>上驗證<span
lang=EN-US>ROM</span>檔案系統演算法的正確性。請見以下的<span lang=EN-US>pseudo code</span>，這個函數的用途是從<span
lang=EN-US>ROM</span>裡的某個檔案讀出一個<span lang=EN-US>byte</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>char of_file_read_char(...)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>無論模擬器或實體機器上<span lang=EN-US>, </span>操作<span lang=EN-US>ROM</span>的檔案系統表格的演算法完全相同<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>首先應計算欲操作的檔案在<span lang=EN-US>ROM</span>裡的起始位置<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>再加上該檔案目前的位置指標即可算得要讀取<span lang=EN-US>ROM</span>裡第幾個<span
lang=EN-US>byte<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// (</span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>儲存在變數“<span lang=EN-US>offset</span>”中<span lang=EN-US>)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>唯一不同的地方只有“讀取<span lang=EN-US>ROM</span>中資料”的方法<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span>#ifdef RUN_ON_SIMULATOR<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>//</span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>這段<span lang=EN-US>code</span>只有要執行於模擬器上時才會被編譯<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// <o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>直接呼叫<span lang=EN-US>Windows</span>的檔案系統<span lang=EN-US>API</span>讀取檔案中第<span
lang=EN-US>offset</span>個<span lang=EN-US>byte<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// (simulated_ROM_fp</span></b><b
style='mso-bidi-font-weight:normal'><span style='font-size:11.0pt;font-family:
"微軟正黑體","sans-serif";color:blue'>是模擬整顆<span lang=EN-US>ROM</span>的檔案的<span
lang=EN-US>file handle)<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>fseek(simulated_ROM_fp,offset,SEEK_SET)
;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>fread(&amp;byte,1,1,simulated_ROM_fp)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span>#else<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>//</span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>這段<span lang=EN-US>code</span>只有要執行於實體機器上時才會被編譯<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// <o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>直接從<span lang=EN-US>ROM</span>裡讀出第<span lang=EN-US>offset</span>個<span
lang=EN-US>byte<o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><b style='mso-bidi-font-weight:normal'><span lang=EN-US
style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>        </span>//<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-tab-count:1'>        </span>byte =
drv_read_ROM(offset) ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span>#endif<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'><span style='mso-spacerun:yes'> </span>return byte ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:48.0pt;mso-para-margin-left:4.0gd;
text-align:justify;text-justify:inter-ideograph;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-size:11.0pt;font-family:"微軟正黑體","sans-serif";
color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:54.0pt;text-align:justify;text-justify:
inter-ideograph;line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:54.0pt;text-align:justify;text-justify:
inter-ideograph;line-height:18.0pt;mso-line-height-rule:exactly'><span
style='font-family:"微軟正黑體","sans-serif"'>另一個模擬檔案系統的方法比較簡單：將所有會加入<span
lang=EN-US>ROM</span>檔案系統的檔案統一存放在<span lang=EN-US>PC</span>硬碟的某個目錄下，當應用程式呼叫檔案系統<span
lang=EN-US>API</span>時，在機器上當然還是要作讀取<span lang=EN-US>ROM</span>裡的檔案系統表格等等動動作，如果在模擬器上就轉換為<span
lang=EN-US>Windows</span>的<span lang=EN-US>API</span>，直接存取上述特殊目錄中的檔案即可。這個方法在模擬器上實現起來很簡單，在<span
lang=EN-US>ROM</span>檔案系統還沒完成以前可以很快讓模擬器先有檔案系統的功能，這樣才不會影響到其他應用程式的開發。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:51.0pt;text-align:justify;text-justify:
inter-ideograph;text-indent:-24.0pt;line-height:18.0pt;mso-line-height-rule:
exactly;mso-list:l1 level1 lfo10;tab-stops:list 51.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]><span
style='font-family:"微軟正黑體","sans-serif"'>電壓偵測模擬 <span lang=EN-US>– </span>如果實體機器是使用電池的產品，系統可能必須定時去偵測電池的剩餘電量<span
lang=EN-US>(</span>量測電壓值<span lang=EN-US>)</span>，如果電量不足應該要警示使用者並且禁止其做一些比較耗電的操作，否則如果瞬間耗電流太大，會使系統瞬間電壓太低，如果超過<span
lang=EN-US>RESET IC</span>的臨界值，會導致機器<span lang=EN-US>RESET</span>。在機器上電池電量自然會隨著時間改變，當系統發現電池電量不足時，就像<span
lang=EN-US>key</span>或<span lang=EN-US>touch panel</span>一樣會送出一個硬體事件，上層程式就是依據這個硬體事件作反應。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:54.0pt;text-align:justify;text-justify:
inter-ideograph;line-height:18.0pt;mso-line-height-rule:exactly'><span
style='font-family:"微軟正黑體","sans-serif"'>雖然在<span lang=EN-US>Windows</span>上似乎沒有直接對應的功能，但要模擬這個功能也相當簡單，方法之一是用一個<span
lang=EN-US>edit box</span>，工程師在測試時可以輸入一個電壓值，模擬器會判斷這個值，如果低於某個值就會送出低電壓事件，工程師就可以在<span
lang=EN-US>PC</span>上驗證處理低電壓事件的程式邏輯有沒有錯誤。如果電壓就是用一個值來模擬的話，那麼在<span lang=EN-US>PC</span>上可以做出很多的變化，例如一般乾電池有個特性就是到快沒電時，如果突然用電量變大，電壓會被快速拉低，然後才慢慢恢復，這是低電壓處理程式很容易出錯的地方；我們可以在<span
lang=EN-US>PC</span>上寫一個小程式模擬這個狀況，依照要測試的電池特性，定時改變代表模擬器電壓的值，工程師就可以驗證處理低電壓的程式是否運作正常。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『只要對<span
lang=EN-US>Windows</span>圖形化介面程式開發有一點了解，再發揮一點想像力，幾乎所有的硬體功能或特性都有辦法模擬<span
style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<h3 style='line-height:18.0pt;mso-line-height-rule:exactly'><a
name="_Toc304922909"><span style='font-family:"微軟正黑體","sans-serif"'>模擬器其他功能 <span
lang=EN-US>– logging and profiling</span></span></a><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif"'><o:p></o:p></span></h3>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『除了模擬硬體之外，模擬器基本上就是一個<span
lang=EN-US>Windows</span>的程式，所以它可以做一些在實體機器上做不到的事情，這對我們除錯或統計都有很大的幫助。舉例來說，有些<span
lang=EN-US>bug</span>很難馬上推測出錯誤的程式所在，要<span lang=EN-US>trace</span>也不知從何<span
lang=EN-US>trace</span>起，這種狀況下<span lang=EN-US>show</span>字是很常用的除錯方式；假設我們的產品是沒有螢幕的該如何是好？<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『我知道你的意思了，雖然機器上沒有螢幕，但是要在模擬器上加一個“螢幕”卻是一件簡單又不花費成本的事情，而且機器上<span
lang=EN-US>LCD</span>通常是圖形模式，<span lang=EN-US>show</span>字其實就是畫圖；如果我們要在模擬器上做一個只能<span
lang=EN-US>show</span>字的“螢幕”，只要用<span lang=EN-US>Windows</span>上“<span
lang=EN-US>MEMO</span>”、“<span lang=EN-US>RichEdit</span>”或其他可以顯示字元的物件即可，它本身就提供顯示字串的功能。系統可以提供類似<span
lang=EN-US>sys_log_string()</span>的<span lang=EN-US>API</span>，但只有運行於模擬器上時才有作用，會把使用者輸入的字串顯示到<span
lang=EN-US>MEMO</span>或<span lang=EN-US>RichEdit</span>物件上，程式如下：<span
style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>void sys_log_string(char *
string)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>{<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>#ifdef RUN_ON_SIMULATOR<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>這段<span
lang=EN-US>code</span>只有要執行於模擬器上時才會被編譯<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>static int line_number = 0 ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>假設最多<span
lang=EN-US>20</span>行<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>line_number++ ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>if(line_number &gt;= 20)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
2'>            </span>line_number = 0 ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>以下程式的寫法是<span
lang=EN-US>C++ builder</span>中對<span lang=EN-US>RichEdit</span>的操作方法<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>讀者可根據使用的開發工具自行調整之<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><b style='mso-bidi-font-weight:
normal'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-tab-count:1'>    </span>// </span></b><b style='mso-bidi-font-weight:
normal'><span style='font-family:"微軟正黑體","sans-serif";color:blue'>總之這裡就是要把字串輸出到某個視窗中<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>//<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span style='mso-tab-count:
1'>    </span>sys_logEdit-&gt;lines[line_number].Text = (SnsiString)string ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>#endif<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'><span
style='mso-spacerun:yes'> </span>return ;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:12.0pt;mso-para-margin-left:1.0gd;
line-height:18.0pt;mso-line-height-rule:exactly'><span lang=EN-US
style='font-family:"微軟正黑體","sans-serif";color:blue'>}<o:p></o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『此來不論實體機器有無顯示設備，在模擬器上都可以很容易的輸出除錯訊息<span
lang=EN-US>(</span>字串<span lang=EN-US>)</span>。<span style='display:none;
mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『輸出字串的功用很多，除了除錯外，還可以用來觀察程式的執行順序，例如在重要的函式開頭處，都印個不同的字串出來；尤其是在多工<span
lang=EN-US>(multiple tasking)</span>與中斷頻繁發生的系統更是需要，因為程式可能在<span lang=EN-US>task</span>間、或一般程式與<span
lang=EN-US>ISR</span>間跳來跳去，如果連程式是怎麼執行的都沒把握，有些較棘手的問題可能真的會找不到頭緒。此外，字串輸出不見得一定要輸出到所謂的“螢幕”或“視窗”，難道不能輸出到檔案嗎？有時候我們會先把執行流程或計算結果先輸出到檔案中，然後再慢慢分析該檔案中的資訊，這樣的檔案稱為<span
lang=EN-US>log</span>檔，可以讓我們追蹤程式執行時的行為。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>此外有時候在作效能調校時，我們需要知道系統的瓶頸在哪裡，才可以針對影響效能最大的涵式或模組進行調整。舉例來說，我們會想知道，在真正執行某個功能時，哪一個函數佔用了最多的<span
lang=EN-US>CPU</span>時間？哪一個函數被執行了最多次？或哪一個函式使用了較多的動態記憶體<span lang=EN-US>…</span>收集執行時期系統資訊的功能稱為“<span
lang=EN-US>profiling</span>”，這些資料量可大可小，有些最好在機器上作，有些則在模擬器上作即可。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>假設要統計效能的資訊，如果機器的輸出設備不方便<span
lang=EN-US>(</span>例如沒有螢幕或螢幕很小、無法用諸如<span lang=EN-US>serial</span>、<span
lang=EN-US>parallel</span>或網路線將資訊傳到<span lang=EN-US>PC</span>、或可儲存<span
lang=EN-US>profiling</span>結果的記憶體不夠大<span lang=EN-US>…)</span>，其實在<span
lang=EN-US>PC</span>上作也可以得到相對的比較值，通常也能抓到問題所在；先在<span lang=EN-US>PC</span>上調整完後，再到機器上作較小範圍的測試即可。<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>菜鳥：『我試著<span
lang=EN-US>highlight</span>一下，所謂的<span lang=EN-US>profiling</span>就是在每一個函數的開頭或結尾收集我們想要的資訊，然後設法將其輸出；因為資料量通常較大，所以輸出到螢幕並不是很好的選擇，最好能將其輸出到檔案中，之後再慢慢分析。要在<span
lang=EN-US>Windows</span>上實現這樣的功能簡直是容易的不得了，我想到一個不錯的應用：你之前提到動態記憶體被破壞是很難檢查的，如果我在所有或每一個值得懷疑的函式的最後面都去檢查<span
lang=EN-US>memory pool</span>是否正常，然後將結果都<span lang=EN-US>log</span>起來，只要分析這個<span
lang=EN-US>log</span>檔應該就可以輕易找出始作俑者吧；然後再仔細<span lang=EN-US>trace</span>這個破壞記憶體的函式，應該就可以把問題解決。<span
style='display:none;mso-hide:all'>板子的們題的地方器，他和</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>系統老鳥：『原理很簡單，但是可以應用的領域很多，任何可以想像得到的資訊都可以被記錄與統計。例如我們在函數的最前面和最後面都去取得系統時間，或是在函數開頭開始計時，結尾時結束計時，就可以得到這個函式的執行時間；也許這個做法不是那麼精確，即便是在<span
lang=EN-US>PC</span>上取得的資訊，只要比較各個函數執行時間的相對值，應該可以得到一些效能調整的靈感。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>另一個應用比較簡單，我們可以為每一個函數定義一個<span
lang=EN-US>global</span>變數，初始值為<span lang=EN-US>0</span>，此後這個函數每被呼叫一次，這個變數就加一；我們可以在某個流程的開頭將這些變數都設為<span
lang=EN-US>0</span>，然候在流程結束後<span lang=EN-US>(</span>應該已經有許多函數已經被呼叫一次或一次以上<span
lang=EN-US>)</span>輸出所有這些變數的值。分析這個結果可知這個流程之內哪些函數被頻繁的呼叫，很可能是瓶頸所在。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify;text-justify:inter-ideograph;
text-indent:27.0pt;mso-char-indent-count:2.25;line-height:18.0pt;mso-line-height-rule:
exactly'><span style='font-family:"微軟正黑體","sans-serif"'>此外我們不是說過<span
lang=EN-US>stack</span>的用量很難準確估計嗎？通常專案一開始我們會給個比較大<span lang=EN-US>(</span>比較安全<span
lang=EN-US>)</span>的值，等系統整合完畢後，再利用<span lang=EN-US>profiling</span>的方法來計算<span
lang=EN-US>stack</span>的最大用量。做法非常直覺，就是在每一個函數被呼叫時取得<span lang=EN-US>SP</span>暫存器<span
lang=EN-US>(Stack pointer)</span>的值，藉此得知目前的<span lang=EN-US>stack</span>用量；如果把所有可能的操作都做了一次，就可以得到<span
lang=EN-US>stack</span>用量的最大值，通常我們再把這個值加大一點應該是安全且不浪費記憶體空間的值了。<span
style='display:none;mso-hide:all'>ˊˊ用台　</span>』<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='line-height:18.0pt;mso-line-height-rule:exactly'><span
lang=EN-US style='font-family:"微軟正黑體","sans-serif"'><o:p>&nbsp;</o:p></span></p>

</div>

<div style='mso-element:footnote-list'><![if !supportFootnotes]><br clear=all>

<hr align=left size=1 width="33%">

<![endif]>

<div style='mso-element:footnote' id=ftn1>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn1' href="#_ftnref1"
name="_ftn1" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[1]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>讀者如果有興趣可以參考附錄</span><span
lang=EN-US>D – “</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>有效率的畫斜線演算法</span><span
lang=EN-US>”</span></p>

</div>

<div style='mso-element:footnote' id=ftn2>

<p class=MsoFootnoteText style='text-align:justify;text-justify:inter-ideograph'><a
style='mso-footnote-id:ftn2' href="#_ftnref2" name="_ftn2" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Times New Roman","serif";
mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;mso-ansi-language:EN-US;
mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[2]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>雖然通常</span><span
lang=EN-US>cross-compiler</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>套件都會提供標準</span><span
lang=EN-US>C</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的函式庫，但</span><span
lang=EN-US>printf()</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>是要輸出到顯示設備的函數，編譯器廠商怎麼可能事先知道我們的硬體設備為何，所以都要經過一番修正或手續才能使用</span><span
lang=EN-US>printf()</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>。</span><span
lang=EN-US>sprintf()</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>則沒有這個問題，它是一個完全與機器無關的函數，使用方式與</span><span
lang=EN-US>printf()</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>相同，但它會將結果輸出到字串，而不是任何顯示設備。</span></p>

</div>

<div style='mso-element:footnote' id=ftn3>

<p class=MsoFootnoteText><a style='mso-footnote-id:ftn3' href="#_ftnref3"
name="_ftn3" title=""><span class=MsoFootnoteReference><span lang=EN-US><span
style='mso-special-character:footnote'><![if !supportFootnotes]><span
class=MsoFootnoteReference><span lang=EN-US style='font-size:10.0pt;font-family:
"Times New Roman","serif";mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[3]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>至少筆者還沒聽過把</span><span
lang=EN-US>Mac</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>當作嵌入式系統開發環境的案例。</span></p>

</div>

<div style='mso-element:footnote' id=ftn4>

<p class=MsoFootnoteText style='text-align:justify;text-justify:inter-ideograph'><a
style='mso-footnote-id:ftn4' href="#_ftnref4" name="_ftn4" title=""><span
class=MsoFootnoteReference><span lang=EN-US><span style='mso-special-character:
footnote'><![if !supportFootnotes]><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Times New Roman","serif";
mso-fareast-font-family:新細明體;mso-font-kerning:1.0pt;mso-ansi-language:EN-US;
mso-fareast-language:ZH-TW;mso-bidi-language:AR-SA'>[4]</span></span><![endif]></span></span></span></a><span
lang=EN-US> </span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>有許多硬體架構可以實現觸控式螢幕的功能，最常使用的架構是當</span><span
lang=EN-US>panel</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的某一點被壓著的時候，驅動程式可以從兩個</span><span
lang=EN-US>AD port</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>分別得到代表</span><span
lang=EN-US>X</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>軸與</span><span
lang=EN-US>Y</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>軸的電壓值，然後利用線性的方法計算目前的被壓著的點的座標，例如電壓</span><span
lang=EN-US>0</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>時代表座標</span><span
lang=EN-US>0</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，電壓</span><span
lang=EN-US>3.3V</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>時代表座標</span><span
lang=EN-US>319</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>，如果電壓是</span><span
lang=EN-US>1.65V</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>時，表示座標是</span><span
lang=EN-US>160</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>左右。實際上的狀況比這個複雜許多，主要是整片</span><span
lang=EN-US>touch panel</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的電壓分布並不是完全線性的，所以會需要校正的功能。本書限於篇幅就不詳述</span><span
lang=EN-US>touch panel</span><span style='font-family:"新細明體","serif";
mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman"'>的詳細原理，讀者如果工作上需要開發觸控式螢幕的驅動程式，可以直接詢問</span><span
lang=EN-US>panel</span><span style='font-family:"新細明體","serif";mso-ascii-font-family:
"Times New Roman";mso-hansi-font-family:"Times New Roman"'>製造商的技術人員即可。</span></p>

</div>

</div>

</body>

</html>
