
<% if news != nil %>
  <% news.each_with_index do |news, index| %>
    <div class="news">
      <div class="news_title">
        <a title="<%= news.title %>" href="<%= news_index_path+'/'+news.id.to_s %>" onclick="window.open('<%= news_index_path+'/'+news.id.to_s %>'); return false;"><%= news.title %></a>
      </div>

      <div class="button_group">
        <a href="#" onclick="like(<%= session[:id] %>, <%= news.id %>, 1);"><img class="button-icon-like" src="/images/like_button.png" alt="" /></a>
        <a href="#" onclick="like(<%= session[:id] %>, <%= news.id %>, 0);"><img class="button-icon-dislike" src="/images/dislike_button.png" alt="" /></a>
        <a href="#" onclick="location.href='http://www.facebook.com/sharer.php?u=http://heygotimes.heroku.com/news/<%= news.id.to_s %>&t=<%= news.title %>'" title="<%= t(:share_hint) %>"><img class="button-icon-dislike" src="/images/facebook_icon.png" alt="" /></a>

        <%# 檢舉 - 視同 feedback  %>
        <a href='#' name='btn1' class='osx btn1' onclick="to_report_dialog( <%= news.id %>,'<%= news.title %>')">
          <img class="button-icon-like" src="/images/stop_button.png" width="30px" height="30px"
               alt="" title="<%= t(:report_spam)%>" />
        </a>
      </div>

      <div class="info">
        由 <%= news.user.first_name %> 於 <%= news.created_at.in_time_zone("Taipei").strftime("%Y/%m/%d") %> 發佈, Tags:
        <% news.tags.each do |tag| %>
            <%= t(tag.name.to_sym) + " " %>
        <% end %>

      </div>

      <div class="image">
         <img src="<%=news.images[0].url.to_s%>" alt="image">
      </div>

      <div class="news_content">
        <%= news.content.html_safe %>
      </div>

      <div class="comments">
      <h3><%= t(:comments)%></h3>
      <div id="fb-root"></div>
      <script>
        window.fbAsyncInit = function() {
          FB.init({appId: <%= Facebooker2.app_id %>, status: true, cookie: true,
                   xfbml: true});
        };
        (function() {
          var e = document.createElement('script'); e.async = true;

          // Todo: we need to check the locale!!!!!!!!!!!!
          //
          e.src = document.location.protocol + '//connect.facebook.net/zh_TW/all.js';

          document.getElementById('fb-root').appendChild(e);
        }());
      </script>
      <fb:comments href="<%= "http://heygotimes.heroku.com/news/"+news.id.to_s %>" num_posts="1" width="650"></fb:comments>

      </div>
    </div>
    <%# if (index != 0) %>
      <hr>
    <%# end %>
  <% end %>
<% end %>


