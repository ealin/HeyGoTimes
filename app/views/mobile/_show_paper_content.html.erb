
<% if news != nil %>
  <% news.each do |news| %>
    <div class="m_news">
      <div class="m_news_title">
          <a href="#m_news_page" onclick="showNews(<%= news.id %>)"><%= news.title %></a>
      </div>

      <div class="m_image">
         <% if news.images != [] %>
            <img src="<%=news.images[0].url.to_s%>" alt="image" width="150">
         <% end %>
      </div>
      <div class="m_news_content">
        <%= news.content.html_safe %>
      </div>

      <div class="m_comments">
        <div class="m_comment_title"><%= t(:comments)%><span id='expand_comment<%= news.id %>'><a href="javascript:void(null)" onclick="expand_comment(<%= news.id %>);"><img class="button-icon-expand" src="/images/expand.png" alt=""/></a></span></div>
        <div class="m_button_group">
          <a href="javascript:void(null)" onclick="like(<%= session[:id] %>, <%= news.id %>, 1);"><img class="button-icon-like" src="/images/like_button.png" alt="" /></a><span class='like_count' id='like_count<%= news.id %>'><%= news.likes.count %></span>
          <a href="javascript:void(null)" onclick="like(<%= session[:id] %>, <%= news.id %>, 0);"><img class="button-icon-unlike" src="/images/unlike_button.png" alt="" /></a><span class='unlike_count' id='unlike_count<%= news.id %>'><%= news.unlikes.count %></span>
          <a href="javascript:void(null)" onclick="location.href='http://www.facebook.com/sharer.php?u=http://heygotimes.heroku.com/news/<%= news.id.to_s %>&t=<%= news.title %>'" title="<%= t(:share_hint) %>"><img class="button-icon-share" src="/images/facebook_icon.png" alt="" /></a>
        </div>
        <div class="fb_comment" id="fb_comment<%= news.id %>">
          <div id="fb-root"></div>
          <script>
            window.fbAsyncInit = function() {
              FB.init({appId: <%= Facebooker2.app_id %>, status: true, cookie: true,
                       xfbml: true});
            };
            (function() {
              var e = document.createElement('script'); e.async = true;

              // Todo: we need to check the locale!!!!!!!!!!!!
              //
              e.src = document.location.protocol + '//connect.facebook.net/zh_TW/all.js';

              document.getElementById('fb-root').appendChild(e);
            }());
          </script>

        </div><!-- fb_comment -->
        <div style="clear: both;"></div>
      </div><!-- m_comments -->
    </div>
    <hr>

    <%# if (index != 0) %>

    <%# end %>
  <% end %>
<% end %>


